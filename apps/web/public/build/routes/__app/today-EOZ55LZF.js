import{a as Aa}from"/build/_shared/chunk-T6T2AEVA.js";import{l as Gt,o as Zt,p as Jt,r as xe}from"/build/_shared/chunk-B376NDD2.js";import"/build/_shared/chunk-G7LPNSEH.js";import{a as Ba}from"/build/_shared/chunk-4F2YHSB3.js";import{D as Ea,E as Je,a as $t,y as Yt}from"/build/_shared/chunk-PHGUOH4A.js";import{b as ce,d as ve}from"/build/_shared/chunk-G5WX4PPA.js";var qu=ce((il,Wu)=>{"use strict";Wu.exports=Si;var Iu="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Lu="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",xi=new RegExp("^[^"+Lu+"]*["+Iu+"]"),Pi=new RegExp("^[^"+Iu+"]*["+Lu+"]");function Si(e){return e=String(e||""),xi.test(e)?"rtl":Pi.test(e)?"ltr":"neutral"}});var yr=ce((sl,_u)=>{function ki(e){var r=typeof e;return e!=null&&(r=="object"||r=="function")}_u.exports=ki});var zu=ce((ol,Vu)=>{var Ti=typeof globalThis=="object"&&globalThis&&globalThis.Object===Object&&globalThis;Vu.exports=Ti});var vt=ce((ll,Hu)=>{var Ri=zu(),ji=typeof self=="object"&&self&&self.Object===Object&&self,Mi=Ri||ji||Function("return this")();Hu.exports=Mi});var Uu=ce((fl,Ku)=>{var Ni=vt(),Ii=function(){return Ni.Date.now()};Ku.exports=Ii});var Yu=ce((cl,$u)=>{var Li=/\s/;function Wi(e){for(var r=e.length;r--&&Li.test(e.charAt(r)););return r}$u.exports=Wi});var Zu=ce((dl,Gu)=>{var qi=Yu(),_i=/^\s+/;function Vi(e){return e&&e.slice(0,qi(e)+1).replace(_i,"")}Gu.exports=Vi});var Dt=ce((vl,Ju)=>{var zi=vt(),Hi=zi.Symbol;Ju.exports=Hi});var rn=ce((Dl,en)=>{var Xu=Dt(),Qu=Object.prototype,Ki=Qu.hasOwnProperty,Ui=Qu.toString,dr=Xu?Xu.toStringTag:void 0;function $i(e){var r=Ki.call(e,dr),t=e[dr];try{e[dr]=void 0;var u=!0}catch{}var n=Ui.call(e);return u&&(r?e[dr]=t:delete e[dr]),n}en.exports=$i});var un=ce((hl,tn)=>{var Yi=Object.prototype,Gi=Yi.toString;function Zi(e){return Gi.call(e)}tn.exports=Zi});var on=ce((gl,sn)=>{var nn=Dt(),Ji=rn(),Xi=un(),Qi="[object Null]",es="[object Undefined]",an=nn?nn.toStringTag:void 0;function rs(e){return e==null?e===void 0?es:Qi:an&&an in Object(e)?Ji(e):Xi(e)}sn.exports=rs});var fn=ce((Cl,ln)=>{function ts(e){return e!=null&&typeof e=="object"}ln.exports=ts});var dn=ce((pl,cn)=>{var us=on(),ns=fn(),as="[object Symbol]";function is(e){return typeof e=="symbol"||ns(e)&&us(e)==as}cn.exports=is});var gn=ce((ml,hn)=>{var ss=Zu(),vn=yr(),os=dn(),Dn=0/0,ls=/^[-+]0x[0-9a-f]+$/i,fs=/^0b[01]+$/i,cs=/^0o[0-7]+$/i,ds=parseInt;function vs(e){if(typeof e=="number")return e;if(os(e))return Dn;if(vn(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=vn(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=ss(e);var t=fs.test(e);return t||cs.test(e)?ds(e.slice(2),t?2:8):ls.test(e)?Dn:+e}hn.exports=vs});var gt=ce((Bl,pn)=>{var Ds=yr(),ht=Uu(),Cn=gn(),hs="Expected a function",gs=Math.max,Cs=Math.min;function ps(e,r,t){var u,n,a,i,l,c,f=0,D=!1,h=!1,d=!0;if(typeof e!="function")throw new TypeError(hs);r=Cn(r)||0,Ds(t)&&(D=!!t.leading,h="maxWait"in t,a=h?gs(Cn(t.maxWait)||0,r):a,d="trailing"in t?!!t.trailing:d);function s(P){var q=u,S=n;return u=n=void 0,f=P,i=e.apply(S,q),i}function g(P){return f=P,l=setTimeout(b,r),D?s(P):i}function m(P){var q=P-c,S=P-f,_=r-q;return h?Cs(_,a-S):_}function B(P){var q=P-c,S=P-f;return c===void 0||q>=r||q<0||h&&S>=a}function b(){var P=ht();if(B(P))return x(P);l=setTimeout(b,m(P))}function x(P){return l=void 0,d&&u?s(P):(u=n=void 0,i)}function R(){l!==void 0&&clearTimeout(l),f=0,u=c=n=l=void 0}function M(){return l===void 0?i:x(ht())}function j(){var P=ht(),q=B(P);if(u=arguments,n=this,c=P,q){if(l===void 0)return g(c);if(h)return clearTimeout(l),l=setTimeout(b,r),s(c)}return l===void 0&&(l=setTimeout(b,r)),i}return j.cancel=R,j.flush=M,j}pn.exports=ps});var Bn=ce((El,mn)=>{var ms=gt(),Bs=yr(),Es="Expected a function";function As(e,r,t){var u=!0,n=!0;if(typeof e!="function")throw new TypeError(Es);return Bs(t)&&(u="leading"in t?!!t.leading:u,n="trailing"in t?!!t.trailing:n),ms(e,r,{leading:u,maxWait:r,trailing:n})}mn.exports=As});var Pn=ce(be=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});var bs=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),mt={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Os={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:bs?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},yn={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(vr=1;vr<20;vr++)yn["f"+vr]=111+vr;var vr;function Or(e,r,t){r&&!("byKey"in r)&&(t=r,r=null),Array.isArray(e)||(e=[e]);var u=e.map(function(i){return bn(i,r)}),n=function(l){return u.some(function(c){return On(c,l)})},a=t==null?n:n(t);return a}function xs(e,r){return Or(e,r)}function Ps(e,r){return Or(e,{byKey:!0},r)}function bn(e,r){var t=r&&r.byKey,u={};e=e.replace("++","+add");var n=e.split("+"),a=n.length;for(var i in mt)u[mt[i]]=!1;var l=!0,c=!1,f=void 0;try{for(var D=n[Symbol.iterator](),h;!(l=(h=D.next()).done);l=!0){var d=h.value,s=d.endsWith("?")&&d.length>1;s&&(d=d.slice(0,-1));var g=Bt(d),m=mt[g];(a===1||!m)&&(t?u.key=g:u.which=xn(d)),m&&(u[m]=s?null:!0)}}catch(B){c=!0,f=B}finally{try{!l&&D.return&&D.return()}finally{if(c)throw f}}return u}function On(e,r){for(var t in e){var u=e[t],n=void 0;if(u!=null&&(t==="key"&&r.key!=null?n=r.key.toLowerCase():t==="which"?n=u===91&&r.which===93?91:r.which:n=r[t],!(n==null&&u===!1)&&n!==u))return!1}return!0}function xn(e){e=Bt(e);var r=yn[e]||e.toUpperCase().charCodeAt(0);return r}function Bt(e){return e=e.toLowerCase(),e=Os[e]||e,e}be.default=Or;be.isHotkey=Or;be.isCodeHotkey=xs;be.isKeyHotkey=Ps;be.parseHotkey=bn;be.compareHotkey=On;be.toKeyCode=xn;be.toKeyName=Bt});Ea();var Uo=ve(Aa());var qr=ve($t());function Xt(e){return Object.prototype.toString.call(e)==="[object Object]"}function de(e){var r,t;return Xt(e)===!1?!1:(r=e.constructor,r===void 0?!0:(t=r.prototype,!(Xt(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}function Ee(e){for(var r=arguments.length,t=Array(r>1?r-1:0),u=1;u<r;u++)t[u-1]=arguments[u];if(!1)var n,a;throw Error("[Immer] minified error nr: "+e+(t.length?" "+t.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function je(e){return!!e&&!!e[ge]}function _e(e){var r;return!!e&&(function(t){if(!t||typeof t!="object")return!1;var u=Object.getPrototypeOf(t);if(u===null)return!0;var n=Object.hasOwnProperty.call(u,"constructor")&&u.constructor;return n===Object||typeof n=="function"&&Function.toString.call(n)===Sa}(e)||Array.isArray(e)||!!e[iu]||!!(!((r=e.constructor)===null||r===void 0)&&r[iu])||et(e)||rt(e))}function or(e,r,t){t===void 0&&(t=!1),Xe(e)===0?(t?Object.keys:it)(e).forEach(function(u){t&&typeof u=="symbol"||r(u,e[u],e)}):e.forEach(function(u,n){return r(n,u,e)})}function Xe(e){var r=e[ge];return r?r.i>3?r.i-4:r.i:Array.isArray(e)?1:et(e)?2:rt(e)?3:0}function Gr(e,r){return Xe(e)===2?e.has(r):Object.prototype.hasOwnProperty.call(e,r)}function Fa(e,r){return Xe(e)===2?e.get(r):e[r]}function su(e,r,t){var u=Xe(e);u===2?e.set(r,t):u===3?e.add(t):e[r]=t}function wa(e,r){return e===r?e!==0||1/e==1/r:e!=e&&r!=r}function et(e){return xa&&e instanceof Map}function rt(e){return Pa&&e instanceof Set}function qe(e){return e.o||e.t}function tt(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var r=ka(e);delete r[ge];for(var t=it(r),u=0;u<t.length;u++){var n=t[u],a=r[n];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[n]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[n]})}return Object.create(Object.getPrototypeOf(e),r)}function ut(e,r){return r===void 0&&(r=!1),nt(e)||je(e)||!_e(e)||(Xe(e)>1&&(e.set=e.add=e.clear=e.delete=ya),Object.freeze(e),r&&or(e,function(t,u){return ut(u,!0)},!0)),e}function ya(){Ee(2)}function nt(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function we(e){var r=Ta[e];return r||Ee(18,e),r}function Qt(){return lr}function Kr(e,r){r&&(we("Patches"),e.u=[],e.s=[],e.v=r)}function Cr(e){Zr(e),e.p.forEach(ba),e.p=null}function Zr(e){e===lr&&(lr=e.l)}function eu(e){return lr={p:[],l:lr,h:e,m:!0,_:0}}function ba(e){var r=e[ge];r.i===0||r.i===1?r.j():r.O=!0}function Ur(e,r){r._=r.p.length;var t=r.p[0],u=e!==void 0&&e!==t;return r.h.g||we("ES5").S(r,e,u),u?(t[ge].P&&(Cr(r),Ee(4)),_e(e)&&(e=pr(r,e),r.l||mr(r,e)),r.u&&we("Patches").M(t[ge].t,e,r.u,r.s)):e=pr(r,t,[]),Cr(r),r.u&&r.v(r.u,r.s),e!==ou?e:void 0}function pr(e,r,t){if(nt(r))return r;var u=r[ge];if(!u)return or(r,function(l,c){return ru(e,u,r,l,c,t)},!0),r;if(u.A!==e)return r;if(!u.P)return mr(e,u.t,!0),u.t;if(!u.I){u.I=!0,u.A._--;var n=u.i===4||u.i===5?u.o=tt(u.k):u.o,a=n,i=!1;u.i===3&&(a=new Set(n),n.clear(),i=!0),or(a,function(l,c){return ru(e,u,n,l,c,t,i)}),mr(e,n,!1),t&&e.u&&we("Patches").N(u,t,e.u,e.s)}return u.o}function ru(e,r,t,u,n,a,i){if(je(n)){var l=pr(e,n,a&&r&&r.i!==3&&!Gr(r.R,u)?a.concat(u):void 0);if(su(t,u,l),!je(l))return;e.m=!1}else i&&t.add(n);if(_e(n)&&!nt(n)){if(!e.h.D&&e._<1)return;pr(e,n),r&&r.A.l||mr(e,n)}}function mr(e,r,t){t===void 0&&(t=!1),e.h.D&&e.m&&ut(r,t)}function $r(e,r){var t=e[ge];return(t?qe(t):e)[r]}function tu(e,r){if(r in e)for(var t=Object.getPrototypeOf(e);t;){var u=Object.getOwnPropertyDescriptor(t,r);if(u)return u;t=Object.getPrototypeOf(t)}}function Jr(e){e.P||(e.P=!0,e.l&&Jr(e.l))}function Yr(e){e.o||(e.o=tt(e.t))}function Xr(e,r,t){var u=et(r)?we("MapSet").F(r,t):rt(r)?we("MapSet").T(r,t):e.g?function(n,a){var i=Array.isArray(n),l={i:i?1:0,A:a?a.A:Qt(),P:!1,I:!1,R:{},l:a,t:n,k:null,o:null,j:null,C:!1},c=l,f=Qr;i&&(c=[l],f=sr);var D=Proxy.revocable(c,f),h=D.revoke,d=D.proxy;return l.k=d,l.j=h,d}(r,t):we("ES5").J(r,t);return(t?t.A:Qt()).p.push(u),u}function Oa(e){return je(e)||Ee(22,e),function r(t){if(!_e(t))return t;var u,n=t[ge],a=Xe(t);if(n){if(!n.P&&(n.i<4||!we("ES5").K(n)))return n.t;n.I=!0,u=uu(t,a),n.I=!1}else u=uu(t,a);return or(u,function(i,l){n&&Fa(n.t,i)===l||su(u,i,r(l))}),a===3?new Set(u):u}(e)}function uu(e,r){switch(r){case 2:return new Map(e);case 3:return Array.from(e)}return tt(e)}var nu,lr,at=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",xa=typeof Map<"u",Pa=typeof Set<"u",au=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",ou=at?Symbol.for("immer-nothing"):((nu={})["immer-nothing"]=!0,nu),iu=at?Symbol.for("immer-draftable"):"__$immer_draftable",ge=at?Symbol.for("immer-state"):"__$immer_state";var Sa=""+Object.prototype.constructor,it=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,ka=Object.getOwnPropertyDescriptors||function(e){var r={};return it(e).forEach(function(t){r[t]=Object.getOwnPropertyDescriptor(e,t)}),r},Ta={},Qr={get:function(e,r){if(r===ge)return e;var t=qe(e);if(!Gr(t,r))return function(n,a,i){var l,c=tu(a,i);return c?"value"in c?c.value:(l=c.get)===null||l===void 0?void 0:l.call(n.k):void 0}(e,t,r);var u=t[r];return e.I||!_e(u)?u:u===$r(e.t,r)?(Yr(e),e.o[r]=Xr(e.A.h,u,e)):u},has:function(e,r){return r in qe(e)},ownKeys:function(e){return Reflect.ownKeys(qe(e))},set:function(e,r,t){var u=tu(qe(e),r);if(u?.set)return u.set.call(e.k,t),!0;if(!e.P){var n=$r(qe(e),r),a=n?.[ge];if(a&&a.t===t)return e.o[r]=t,e.R[r]=!1,!0;if(wa(t,n)&&(t!==void 0||Gr(e.t,r)))return!0;Yr(e),Jr(e)}return e.o[r]===t&&(t!==void 0||r in e.o)||Number.isNaN(t)&&Number.isNaN(e.o[r])||(e.o[r]=t,e.R[r]=!0),!0},deleteProperty:function(e,r){return $r(e.t,r)!==void 0||r in e.t?(e.R[r]=!1,Yr(e),Jr(e)):delete e.R[r],e.o&&delete e.o[r],!0},getOwnPropertyDescriptor:function(e,r){var t=qe(e),u=Reflect.getOwnPropertyDescriptor(t,r);return u&&{writable:!0,configurable:e.i!==1||r!=="length",enumerable:u.enumerable,value:t[r]}},defineProperty:function(){Ee(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ee(12)}},sr={};or(Qr,function(e,r){sr[e]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}}),sr.deleteProperty=function(e,r){return sr.set.call(this,e,r,void 0)},sr.set=function(e,r,t){return Qr.set.call(this,e[0],r,t,e[0])};var Ra=function(){function e(t){var u=this;this.g=au,this.D=!0,this.produce=function(n,a,i){if(typeof n=="function"&&typeof a!="function"){var l=a;a=n;var c=u;return function(m){var B=this;m===void 0&&(m=l);for(var b=arguments.length,x=Array(b>1?b-1:0),R=1;R<b;R++)x[R-1]=arguments[R];return c.produce(m,function(M){var j;return(j=a).call.apply(j,[B,M].concat(x))})}}var f;if(typeof a!="function"&&Ee(6),i!==void 0&&typeof i!="function"&&Ee(7),_e(n)){var D=eu(u),h=Xr(u,n,void 0),d=!0;try{f=a(h),d=!1}finally{d?Cr(D):Zr(D)}return typeof Promise<"u"&&f instanceof Promise?f.then(function(m){return Kr(D,i),Ur(m,D)},function(m){throw Cr(D),m}):(Kr(D,i),Ur(f,D))}if(!n||typeof n!="object"){if((f=a(n))===void 0&&(f=n),f===ou&&(f=void 0),u.D&&ut(f,!0),i){var s=[],g=[];we("Patches").M(n,f,s,g),i(s,g)}return f}Ee(21,n)},this.produceWithPatches=function(n,a){if(typeof n=="function")return function(f){for(var D=arguments.length,h=Array(D>1?D-1:0),d=1;d<D;d++)h[d-1]=arguments[d];return u.produceWithPatches(f,function(s){return n.apply(void 0,[s].concat(h))})};var i,l,c=u.produce(n,a,function(f,D){i=f,l=D});return typeof Promise<"u"&&c instanceof Promise?c.then(function(f){return[f,i,l]}):[c,i,l]},typeof t?.useProxies=="boolean"&&this.setUseProxies(t.useProxies),typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var r=e.prototype;return r.createDraft=function(t){_e(t)||Ee(8),je(t)&&(t=Oa(t));var u=eu(this),n=Xr(this,t,void 0);return n[ge].C=!0,Zr(u),n},r.finishDraft=function(t,u){var n=t&&t[ge],a=n.A;return Kr(a,u),Ur(void 0,a)},r.setAutoFreeze=function(t){this.D=t},r.setUseProxies=function(t){t&&!au&&Ee(20),this.g=t},r.applyPatches=function(t,u){var n;for(n=u.length-1;n>=0;n--){var a=u[n];if(a.path.length===0&&a.op==="replace"){t=a.value;break}}n>-1&&(u=u.slice(n+1));var i=we("Patches").$;return je(t)?i(t,u):this.produce(t,function(l){return i(l,u)})},e}(),Ce=new Ra,Br=Ce.produce,Yo=Ce.produceWithPatches.bind(Ce),Go=Ce.setAutoFreeze.bind(Ce),Zo=Ce.setUseProxies.bind(Ce),Jo=Ce.applyPatches.bind(Ce),st=Ce.createDraft.bind(Ce),ot=Ce.finishDraft.bind(Ce);function ye(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var Fr=new WeakMap,wr=new WeakMap,fr=new WeakMap,lu=new WeakMap,fu=new WeakMap,cu=new WeakMap,du=new WeakMap;function vu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Er(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?vu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var ja=0,ku=()=>{var e={children:[],operations:[],selection:null,marks:null,id:ja++,isInline:()=>!1,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:r=>{for(var t of o.pathRefs(e))fi.transform(t,r);for(var u of o.pointRefs(e))ci.transform(u,r);for(var n of o.rangeRefs(e))Di.transform(n,r);var a=Fr.get(e)||[],i=wr.get(e)||new Set,l,c,f=g=>{if(g){var m=g.join(",");c.has(m)||(c.add(m),l.push(g))}};if(v.operationCanTransformPath(r)){l=[],c=new Set;for(var D of a){var h=v.transform(D,r);f(h)}}else l=a,c=i;var d=e.getDirtyPaths(r);for(var s of d)f(s);Fr.set(e,l),wr.set(e,c),F.transform(e,r),e.operations.push(r),o.normalize(e),r.type==="set_selection"&&(e.marks=null),fr.get(e)||(fr.set(e,!0),Promise.resolve().then(()=>{fr.set(e,!1),e.onChange(),e.operations=[]}))},addMark:(r,t)=>{var{selection:u,markableVoid:n}=e;if(u){var a=(d,s)=>{if(!I.isText(d))return!1;var[g,m]=o.parent(e,s);return!e.isVoid(g)||e.markableVoid(g)},i=p.isExpanded(u),l=!1;if(!i){var[c,f]=o.node(e,u);if(c&&a(c,f)){var[D]=o.parent(e,f);l=D&&e.markableVoid(D)}}if(i||l)F.setNodes(e,{[r]:t},{match:a,split:!0,voids:!0});else{var h=Er(Er({},o.marks(e)||{}),{},{[r]:t});e.marks=h,fr.get(e)||e.onChange()}}},deleteBackward:r=>{var{selection:t}=e;t&&p.isCollapsed(t)&&F.delete(e,{unit:r,reverse:!0})},deleteForward:r=>{var{selection:t}=e;t&&p.isCollapsed(t)&&F.delete(e,{unit:r})},deleteFragment:r=>{var{selection:t}=e;t&&p.isExpanded(t)&&F.delete(e,{reverse:r==="backward"})},getFragment:()=>{var{selection:r}=e;return r?O.fragment(e,r):[]},insertBreak:()=>{F.splitNodes(e,{always:!0})},insertSoftBreak:()=>{F.splitNodes(e,{always:!0})},insertFragment:r=>{F.insertFragment(e,r)},insertNode:r=>{F.insertNodes(e,r)},insertText:r=>{var{selection:t,marks:u}=e;if(t){if(u){var n=Er({text:r},u);F.insertNodes(e,n)}else F.insertText(e,r);e.marks=null}},normalizeNode:r=>{var[t,u]=r;if(!I.isText(t)){if(G.isElement(t)&&t.children.length===0){var n={text:""};F.insertNodes(e,n,{at:u.concat(0),voids:!0});return}for(var a=o.isEditor(t)?!1:G.isElement(t)&&(e.isInline(t)||t.children.length===0||I.isText(t.children[0])||e.isInline(t.children[0])),i=0,l=0;l<t.children.length;l++,i++){var c=O.get(e,u);if(!I.isText(c)){var f=t.children[l],D=c.children[i-1],h=l===t.children.length-1,d=I.isText(f)||G.isElement(f)&&e.isInline(f);if(d!==a)F.removeNodes(e,{at:u.concat(i),voids:!0}),i--;else if(G.isElement(f)){if(e.isInline(f)){if(D==null||!I.isText(D)){var s={text:""};F.insertNodes(e,s,{at:u.concat(i),voids:!0}),i++}else if(h){var g={text:""};F.insertNodes(e,g,{at:u.concat(i+1),voids:!0}),i++}}}else D!=null&&I.isText(D)&&(I.equals(f,D,{loose:!0})?(F.mergeNodes(e,{at:u.concat(i),voids:!0}),i--):D.text===""?(F.removeNodes(e,{at:u.concat(i-1),voids:!0}),i--):f.text===""&&(F.removeNodes(e,{at:u.concat(i),voids:!0}),i--))}}}},removeMark:r=>{var{selection:t}=e;if(t){var u=(D,h)=>{if(!I.isText(D))return!1;var[d,s]=o.parent(e,h);return!e.isVoid(d)||e.markableVoid(d)},n=p.isExpanded(t),a=!1;if(!n){var[i,l]=o.node(e,t);if(i&&u(i,l)){var[c]=o.parent(e,l);a=c&&e.markableVoid(c)}}if(n||a)F.unsetNodes(e,r,{match:u,split:!0,voids:!0});else{var f=Er({},o.marks(e)||{});delete f[r],e.marks=f,fr.get(e)||e.onChange()}}},getDirtyPaths:r=>{switch(r.type){case"insert_text":case"remove_text":case"set_node":{var{path:t}=r;return v.levels(t)}case"insert_node":{var{node:u,path:n}=r,a=v.levels(n),i=I.isText(u)?[]:Array.from(O.nodes(u),K=>{var[,Q]=K;return n.concat(Q)});return[...a,...i]}case"merge_node":{var{path:l}=r,c=v.ancestors(l),f=v.previous(l);return[...c,f]}case"move_node":{var{path:D,newPath:h}=r;if(v.equals(D,h))return[];var d=[],s=[];for(var g of v.ancestors(D)){var m=v.transform(g,r);d.push(m)}for(var B of v.ancestors(h)){var b=v.transform(B,r);s.push(b)}var x=s[s.length-1],R=h[h.length-1],M=x.concat(R);return[...d,...s,M]}case"remove_node":{var{path:j}=r,P=v.ancestors(j);return[...P]}case"split_node":{var{path:q}=r,S=v.levels(q),_=v.next(q);return[...S,_]}default:return[]}}};return e};function Ma(e,r){if(e==null)return{};var t={},u=Object.keys(e),n,a;for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&(t[n]=e[n]);return t}function ke(e,r){if(e==null)return{};var t=Ma(e,r),u,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)u=a[n],!(r.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,u)||(t[u]=e[u]))}return t}var lt=function(r){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=!t,n=t?_a(r):r,a=H.None,i=H.None,l=0,c=null,f=null;for(var D of n){var h=D.codePointAt(0);if(!h)break;var d=Qa(D,h);if([a,i]=u?[i,d]:[d,a],rr(a,H.ZWJ)&&rr(i,H.ExtPict)&&(u?c=Du(r.substring(0,l)):c=Du(r.substring(0,r.length-l)),!c)||rr(a,H.RI)&&rr(i,H.RI)&&(f!==null?f=!f:u?f=!0:f=ni(r.substring(0,r.length-l)),!f)||a!==H.None&&i!==H.None&&ri(a,i))break;l+=D.length}return l||1},Na=/\s/,Ia=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,La=/['\u2018\u2019]/,Wa=function(r){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,u=0,n=!1;r.length>0;){var a=lt(r,t),[i,l]=ft(r,a,t);if(qa(i,l,t))n=!0,u+=a;else if(!n)u+=a;else break;r=l}return u},ft=(e,r,t)=>{if(t){var u=e.length-r;return[e.slice(u,e.length),e.slice(0,u)]}return[e.slice(0,r),e.slice(r)]},qa=function e(r,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(Na.test(r))return!1;if(La.test(r)){var n=lt(t,u),[a,i]=ft(t,n,u);if(e(a,i,u))return!0}return!Ia.test(r)},_a=function*(r){for(var t=r.length-1,u=0;u<r.length;u++){var n=r.charAt(t-u);if(za(n.charCodeAt(0))){var a=r.charAt(t-u-1);if(Va(a.charCodeAt(0))){yield a+n,u++;continue}}yield n}},Va=e=>e>=55296&&e<=56319,za=e=>e>=56320&&e<=57343,H;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(H||(H={}));var Ha=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,Ka=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,Ua=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,$a=/^[\u1100-\u115F\uA960-\uA97C]$/,Ya=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,Ga=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,Za=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,Ja=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,Xa=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,Qa=(e,r)=>{var t=H.Any;return e.search(Ha)!==-1&&(t|=H.Extend),r===8205&&(t|=H.ZWJ),r>=127462&&r<=127487&&(t|=H.RI),e.search(Ka)!==-1&&(t|=H.Prepend),e.search(Ua)!==-1&&(t|=H.SpacingMark),e.search($a)!==-1&&(t|=H.L),e.search(Ya)!==-1&&(t|=H.V),e.search(Ga)!==-1&&(t|=H.T),e.search(Za)!==-1&&(t|=H.LV),e.search(Ja)!==-1&&(t|=H.LVT),e.search(Xa)!==-1&&(t|=H.ExtPict),t};function rr(e,r){return(e&r)!==0}var ei=[[H.L,H.L|H.V|H.LV|H.LVT],[H.LV|H.V,H.V|H.T],[H.LVT|H.T,H.T],[H.Any,H.Extend|H.ZWJ],[H.Any,H.SpacingMark],[H.Prepend,H.Any],[H.ZWJ,H.ExtPict],[H.RI,H.RI]];function ri(e,r){return ei.findIndex(t=>rr(e,t[0])&&rr(r,t[1]))===-1}var ti=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,Du=e=>e.search(ti)!==-1,ui=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,ni=e=>{var r=e.match(ui);if(r===null)return!1;var t=r[0].length/2;return t%2===1},hu=e=>de(e)&&O.isNodeList(e.children)&&!o.isEditor(e),G={isAncestor(e){return de(e)&&O.isNodeList(e.children)},isElement:hu,isElementList(e){return Array.isArray(e)&&e.every(r=>G.isElement(r))},isElementProps(e){return e.children!==void 0},isElementType:function(r,t){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return hu(r)&&r[u]===t},matches(e,r){for(var t in r)if(t!=="children"&&e[t]!==r[t])return!1;return!0}},ai=["text"],ii=["text"];function gu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Qe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?gu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):gu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Cu=new WeakMap,o={above(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:t=!1,mode:u="lowest",at:n=e.selection,match:a}=r;if(!!n){var i=o.path(e,n),l=u==="lowest";for(var[c,f]of o.levels(e,{at:i,voids:t,match:a,reverse:l}))if(!I.isText(c)){if(p.isRange(n)){if(v.isAncestor(f,n.anchor.path)&&v.isAncestor(f,n.focus.path))return[c,f]}else if(!v.equals(i,f))return[c,f]}}},addMark(e,r,t){e.addMark(r,t)},after(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.point(e,r,{edge:"end"}),n=o.end(e,[]),a={anchor:u,focus:n},{distance:i=1}=t,l=0,c;for(var f of o.positions(e,Qe(Qe({},t),{},{at:a}))){if(l>i)break;l!==0&&(c=f),l++}return c},before(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.start(e,[]),n=o.point(e,r,{edge:"start"}),a={anchor:u,focus:n},{distance:i=1}=t,l=0,c;for(var f of o.positions(e,Qe(Qe({},t),{},{at:a,reverse:!0}))){if(l>i)break;l!==0&&(c=f),l++}return c},deleteBackward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteBackward(t)},deleteForward(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:t="character"}=r;e.deleteForward(t)},deleteFragment(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{direction:t="forward"}=r;e.deleteFragment(t)},edges(e,r){return[o.start(e,r),o.end(e,r)]},end(e,r){return o.point(e,r,{edge:"end"})},first(e,r){var t=o.path(e,r,{edge:"start"});return o.node(e,t)},fragment(e,r){var t=o.range(e,r),u=O.fragment(e,t);return u},hasBlocks(e,r){return r.children.some(t=>o.isBlock(e,t))},hasInlines(e,r){return r.children.some(t=>I.isText(t)||o.isInline(e,t))},hasTexts(e,r){return r.children.every(t=>I.isText(t))},insertBreak(e){e.insertBreak()},insertSoftBreak(e){e.insertSoftBreak()},insertFragment(e,r){e.insertFragment(r)},insertNode(e,r){e.insertNode(r)},insertText(e,r){e.insertText(r)},isBlock(e,r){return G.isElement(r)&&!e.isInline(r)},isEditor(e){var r=Cu.get(e);if(r!==void 0)return r;if(!de(e))return!1;var t=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteBackward=="function"&&typeof e.deleteForward=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isInline=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||de(e.marks))&&(e.selection===null||p.isRange(e.selection))&&O.isNodeList(e.children)&&Se.isOperationList(e.operations);return Cu.set(e,t),t},isEnd(e,r,t){var u=o.end(e,t);return U.equals(r,u)},isEdge(e,r,t){return o.isStart(e,r,t)||o.isEnd(e,r,t)},isEmpty(e,r){var{children:t}=r,[u]=t;return t.length===0||t.length===1&&I.isText(u)&&u.text===""&&!e.isVoid(r)},isInline(e,r){return G.isElement(r)&&e.isInline(r)},isNormalizing(e){var r=lu.get(e);return r===void 0?!0:r},isStart(e,r,t){if(r.offset!==0)return!1;var u=o.start(e,t);return U.equals(r,u)},isVoid(e,r){return G.isElement(r)&&e.isVoid(r)},last(e,r){var t=o.path(e,r,{edge:"end"});return o.node(e,t)},leaf(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,r,t),n=O.leaf(e,u);return[n,u]},*levels(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,reverse:u=!1,voids:n=!1}=r,{match:a}=r;if(a==null&&(a=()=>!0),!!t){var i=[],l=o.path(e,t);for(var[c,f]of O.levels(e,l))if(!!a(c,f)&&(i.push([c,f]),!n&&o.isVoid(e,c)))break;u&&i.reverse(),yield*i}},marks(e){var{marks:r,selection:t}=e;if(!t)return null;if(r)return r;if(p.isExpanded(t)){var[u]=o.nodes(e,{match:I.isText});if(u){var[n]=u,a=ke(n,ai);return a}else return{}}var{anchor:i}=t,{path:l}=i,[c]=o.leaf(e,l);if(i.offset===0){var f=o.previous(e,{at:l,match:I.isText}),D=o.above(e,{match:B=>o.isVoid(e,B)&&e.markableVoid(B)});if(!D){var h=o.above(e,{match:B=>o.isBlock(e,B)});if(f&&h){var[d,s]=f,[,g]=h;v.isAncestor(g,s)&&(c=d)}}}var m=ke(c,ii);return m},next(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:u=!1}=r,{match:n,at:a=e.selection}=r;if(!!a){var i=o.after(e,a,{voids:u});if(!!i){var[,l]=o.last(e,[]),c=[i.path,l];if(v.isPath(a)&&a.length===0)throw new Error("Cannot get the next node from the root node!");if(n==null)if(v.isPath(a)){var[f]=o.parent(e,a);n=h=>f.children.includes(h)}else n=()=>!0;var[D]=o.nodes(e,{at:c,match:n,mode:t,voids:u});return D}}},node(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,r,t),n=O.get(e,u);return[n,u]},*nodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,mode:u="all",universal:n=!1,reverse:a=!1,voids:i=!1}=r,{match:l}=r;if(l||(l=()=>!0),!!t){var c,f;if(si.isSpan(t))c=t[0],f=t[1];else{var D=o.path(e,t,{edge:"start"}),h=o.path(e,t,{edge:"end"});c=a?h:D,f=a?D:h}var d=O.nodes(e,{reverse:a,from:c,to:f,pass:R=>{var[M]=R;return i?!1:o.isVoid(e,M)}}),s=[],g;for(var[m,B]of d){var b=g&&v.compare(B,g[1])===0;if(!(u==="highest"&&b)){if(!l(m,B)){if(n&&!b&&I.isText(m))return;continue}if(u==="lowest"&&b){g=[m,B];continue}var x=u==="lowest"?g:[m,B];x&&(n?s.push(x):yield x),g=[m,B]}}u==="lowest"&&g&&(n?s.push(g):yield g),n&&(yield*s)}},normalize(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:t=!1}=r,u=c=>Fr.get(c)||[],n=c=>wr.get(c)||new Set,a=c=>{var f=u(c).pop(),D=f.join(",");return n(c).delete(D),f};if(!!o.isNormalizing(e)){if(t){var i=Array.from(O.nodes(e),c=>{var[,f]=c;return f}),l=new Set(i.map(c=>c.join(",")));Fr.set(e,i),wr.set(e,l)}u(e).length!==0&&o.withoutNormalizing(e,()=>{for(var c of u(e))if(O.has(e,c)){var f=o.node(e,c),[D,h]=f;G.isElement(D)&&D.children.length===0&&e.normalizeNode(f)}for(var d=u(e).length*42,s=0;u(e).length!==0;){if(s>d)throw new Error(`
            Could not completely normalize the editor after `.concat(d,` iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.
          `));var g=a(e);if(O.has(e,g)){var m=o.node(e,g);e.normalizeNode(m)}s++}})}},parent(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},u=o.path(e,r,t),n=v.parent(u),a=o.node(e,n);return a},path(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:u,edge:n}=t;if(v.isPath(r)){if(n==="start"){var[,a]=O.first(e,r);r=a}else if(n==="end"){var[,i]=O.last(e,r);r=i}}return p.isRange(r)&&(n==="start"?r=p.start(r):n==="end"?r=p.end(r):r=v.common(r.anchor.path,r.focus.path)),U.isPoint(r)&&(r=r.path),u!=null&&(r=r.slice(0,u)),r},hasPath(e,r){return O.has(e,r)},pathRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,n={current:r,affinity:u,unref(){var{current:i}=n,l=o.pathRefs(e);return l.delete(n),n.current=null,i}},a=o.pathRefs(e);return a.add(n),n},pathRefs(e){var r=fu.get(e);return r||(r=new Set,fu.set(e,r)),r},point(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:u="start"}=t;if(v.isPath(r)){var n;if(u==="end"){var[,a]=O.last(e,r);n=a}else{var[,i]=O.first(e,r);n=i}var l=O.get(e,n);if(!I.isText(l))throw new Error("Cannot get the ".concat(u," point in the node at path [").concat(r,"] because it has no ").concat(u," text node."));return{path:n,offset:u==="end"?l.text.length:0}}if(p.isRange(r)){var[c,f]=p.edges(r);return u==="start"?c:f}return r},pointRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,n={current:r,affinity:u,unref(){var{current:i}=n,l=o.pointRefs(e);return l.delete(n),n.current=null,i}},a=o.pointRefs(e);return a.add(n),n},pointRefs(e){var r=cu.get(e);return r||(r=new Set,cu.set(e,r)),r},*positions(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{at:t=e.selection,unit:u="offset",reverse:n=!1,voids:a=!1}=r;if(!t)return;var i=o.range(e,t),[l,c]=p.edges(i),f=n?c:l,D=!1,h="",d=0,s=0,g=0;for(var[m,B]of o.nodes(e,{at:t,reverse:n,voids:a})){if(G.isElement(m)){if(!a&&e.isVoid(m)){yield o.start(e,B);continue}if(e.isInline(m))continue;if(o.hasInlines(e,m)){var b=v.isAncestor(B,c.path)?c:o.end(e,B),x=v.isAncestor(B,l.path)?l:o.start(e,B);h=o.string(e,{anchor:x,focus:b},{voids:a}),D=!0}}if(I.isText(m)){var R=v.equals(B,f.path);for(R?(s=n?f.offset:m.text.length-f.offset,g=f.offset):(s=m.text.length,g=n?s:0),(R||D||u==="offset")&&(yield{path:B,offset:g},D=!1);;){if(d===0){if(h==="")break;d=M(h,u,n),h=ft(h,d,n)[1]}if(g=n?g-d:g+d,s=s-d,s<0){d=-s;break}d=0,yield{path:B,offset:g}}}}function M(j,P,q){return P==="character"?lt(j,q):P==="word"?Wa(j,q):P==="line"||P==="block"?j.length:1}},previous(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:t="lowest",voids:u=!1}=r,{match:n,at:a=e.selection}=r;if(!!a){var i=o.before(e,a,{voids:u});if(!!i){var[,l]=o.first(e,[]),c=[i.path,l];if(v.isPath(a)&&a.length===0)throw new Error("Cannot get the previous node from the root node!");if(n==null)if(v.isPath(a)){var[f]=o.parent(e,a);n=h=>f.children.includes(h)}else n=()=>!0;var[D]=o.nodes(e,{reverse:!0,at:c,match:n,mode:t,voids:u});return D}}},range(e,r,t){if(p.isRange(r)&&!t)return r;var u=o.start(e,r),n=o.end(e,t||r);return{anchor:u,focus:n}},rangeRef(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:u="forward"}=t,n={current:r,affinity:u,unref(){var{current:i}=n,l=o.rangeRefs(e);return l.delete(n),n.current=null,i}},a=o.rangeRefs(e);return a.add(n),n},rangeRefs(e){var r=du.get(e);return r||(r=new Set,du.set(e,r)),r},removeMark(e,r){e.removeMark(r)},setNormalizing(e,r){lu.set(e,r)},start(e,r){return o.point(e,r,{edge:"start"})},string(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=t,n=o.range(e,r),[a,i]=p.edges(n),l="";for(var[c,f]of o.nodes(e,{at:n,match:I.isText,voids:u})){var D=c.text;v.equals(f,i.path)&&(D=D.slice(0,i.offset)),v.equals(f,a.path)&&(D=D.slice(a.offset)),l+=D}return l},unhangRange(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:u=!1}=t,[n,a]=p.edges(r);if(n.offset!==0||a.offset!==0||p.isCollapsed(r)||v.hasPrevious(a.path))return r;var i=o.above(e,{at:a,match:s=>o.isBlock(e,s),voids:u}),l=i?i[1]:[],c=o.start(e,n),f={anchor:c,focus:a},D=!0;for(var[h,d]of o.nodes(e,{at:f,match:I.isText,reverse:!0,voids:u})){if(D){D=!1;continue}if(h.text!==""||v.isBefore(d,l)){a={path:d,offset:h.text.length};break}}return{anchor:n,focus:a}},void(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return o.above(e,Qe(Qe({},r),{},{match:t=>o.isVoid(e,t)}))},withoutNormalizing(e,r){var t=o.isNormalizing(e);o.setNormalizing(e,!1);try{r()}finally{o.setNormalizing(e,t)}o.normalize(e)}};var si={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(v.isPath)}},oi=["children"],li=["text"],pu=new WeakMap,O={ancestor(e,r){var t=O.get(e,r);if(I.isText(t))throw new Error("Cannot get the ancestor node at path [".concat(r,"] because it refers to a text node instead: ").concat(fe.stringify(t)));return t},*ancestors(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var u of v.ancestors(r,t)){var n=O.ancestor(e,u),a=[n,u];yield a}},child(e,r){if(I.isText(e))throw new Error("Cannot get the child of a text node: ".concat(fe.stringify(e)));var t=e.children[r];if(t==null)throw new Error("Cannot get child at index `".concat(r,"` in node: ").concat(fe.stringify(e)));return t},*children(e,r){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{reverse:u=!1}=t,n=O.ancestor(e,r),{children:a}=n,i=u?a.length-1:0;u?i>=0:i<a.length;){var l=O.child(n,i),c=r.concat(i);yield[l,c],i=u?i-1:i+1}},common(e,r,t){var u=v.common(r,t),n=O.get(e,u);return[n,u]},descendant(e,r){var t=O.get(e,r);if(o.isEditor(t))throw new Error("Cannot get the descendant node at path [".concat(r,"] because it refers to the root editor node instead: ").concat(fe.stringify(t)));return t},*descendants(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))u.length!==0&&(yield[t,u])},*elements(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))G.isElement(t)&&(yield[t,u])},extractProps(e){if(G.isAncestor(e)){var r=ke(e,oi);return r}else{var r=ke(e,li);return r}},first(e,r){for(var t=r.slice(),u=O.get(e,t);u&&!(I.isText(u)||u.children.length===0);)u=u.children[0],t.push(0);return[u,t]},fragment(e,r){if(I.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(fe.stringify(e)));var t=Br({children:e.children},u=>{var[n,a]=p.edges(r),i=O.nodes(u,{reverse:!0,pass:d=>{var[,s]=d;return!p.includes(r,s)}});for(var[,l]of i){if(!p.includes(r,l)){var c=O.parent(u,l),f=l[l.length-1];c.children.splice(f,1)}if(v.equals(l,a.path)){var D=O.leaf(u,l);D.text=D.text.slice(0,a.offset)}if(v.equals(l,n.path)){var h=O.leaf(u,l);h.text=h.text.slice(n.offset)}}o.isEditor(u)&&(u.selection=null)});return t.children},get(e,r){for(var t=e,u=0;u<r.length;u++){var n=r[u];if(I.isText(t)||!t.children[n])throw new Error("Cannot find a descendant at path [".concat(r,"] in node: ").concat(fe.stringify(e)));t=t.children[n]}return t},has(e,r){for(var t=e,u=0;u<r.length;u++){var n=r[u];if(I.isText(t)||!t.children[n])return!1;t=t.children[n]}return!0},isNode(e){return I.isText(e)||G.isElement(e)||o.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var r=pu.get(e);if(r!==void 0)return r;var t=e.every(u=>O.isNode(u));return pu.set(e,t),t},last(e,r){for(var t=r.slice(),u=O.get(e,t);u&&!(I.isText(u)||u.children.length===0);){var n=u.children.length-1;u=u.children[n],t.push(n)}return[u,t]},leaf(e,r){var t=O.get(e,r);if(!I.isText(t))throw new Error("Cannot get the leaf node at path [".concat(r,"] because it refers to a non-leaf node: ").concat(fe.stringify(t)));return t},*levels(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};for(var u of v.levels(r,t)){var n=O.get(e,u);yield[n,u]}},matches(e,r){return G.isElement(e)&&G.isElementProps(r)&&G.matches(e,r)||I.isText(e)&&I.isTextProps(r)&&I.matches(e,r)},*nodes(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{pass:t,reverse:u=!1}=r,{from:n=[],to:a}=r,i=new Set,l=[],c=e;!(a&&(u?v.isBefore(l,a):v.isAfter(l,a)));){if(i.has(c)||(yield[c,l]),!i.has(c)&&!I.isText(c)&&c.children.length!==0&&(t==null||t([c,l])===!1)){i.add(c);var f=u?c.children.length-1:0;v.isAncestor(l,n)&&(f=n[l.length]),l=l.concat(f),c=O.get(e,l);continue}if(l.length===0)break;if(!u){var D=v.next(l);if(O.has(e,D)){l=D,c=O.get(e,l);continue}}if(u&&l[l.length-1]!==0){var h=v.previous(l);l=h,c=O.get(e,l);continue}l=v.parent(l),c=O.get(e,l),i.add(c)}},parent(e,r){var t=v.parent(r),u=O.get(e,t);if(I.isText(u))throw new Error("Cannot get the parent of path [".concat(r,"] because it does not exist in the root."));return u},string(e){return I.isText(e)?e.text:e.children.map(O.string).join("")},*texts(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};for(var[t,u]of O.nodes(e,r))I.isText(t)&&(yield[t,u])}};function mu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function ne(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?mu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):mu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Se={isNodeOperation(e){return Se.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!de(e))return!1;switch(e.type){case"insert_node":return v.isPath(e.path)&&O.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&v.isPath(e.path);case"merge_node":return typeof e.position=="number"&&v.isPath(e.path)&&de(e.properties);case"move_node":return v.isPath(e.path)&&v.isPath(e.newPath);case"remove_node":return v.isPath(e.path)&&O.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&v.isPath(e.path);case"set_node":return v.isPath(e.path)&&de(e.properties)&&de(e.newProperties);case"set_selection":return e.properties===null&&p.isRange(e.newProperties)||e.newProperties===null&&p.isRange(e.properties)||de(e.properties)&&de(e.newProperties);case"split_node":return v.isPath(e.path)&&typeof e.position=="number"&&de(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(r=>Se.isOperation(r))},isSelectionOperation(e){return Se.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Se.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ne(ne({},e),{},{type:"remove_node"});case"insert_text":return ne(ne({},e),{},{type:"remove_text"});case"merge_node":return ne(ne({},e),{},{type:"split_node",path:v.previous(e.path)});case"move_node":{var{newPath:r,path:t}=e;if(v.equals(r,t))return e;if(v.isSibling(t,r))return ne(ne({},e),{},{path:r,newPath:t});var u=v.transform(t,e),n=v.transform(v.next(t),e);return ne(ne({},e),{},{path:u,newPath:n})}case"remove_node":return ne(ne({},e),{},{type:"insert_node"});case"remove_text":return ne(ne({},e),{},{type:"insert_text"});case"set_node":{var{properties:a,newProperties:i}=e;return ne(ne({},e),{},{properties:i,newProperties:a})}case"set_selection":{var{properties:l,newProperties:c}=e;return l==null?ne(ne({},e),{},{properties:c,newProperties:null}):c==null?ne(ne({},e),{},{properties:null,newProperties:l}):ne(ne({},e),{},{properties:c,newProperties:l})}case"split_node":return ne(ne({},e),{},{type:"merge_node",path:v.next(e.path)})}}},v={ancestors(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,u=v.levels(e,r);return t?u=u.slice(1):u=u.slice(0,-1),u},common(e,r){for(var t=[],u=0;u<e.length&&u<r.length;u++){var n=e[u],a=r[u];if(n!==a)break;t.push(n)}return t},compare(e,r){for(var t=Math.min(e.length,r.length),u=0;u<t;u++){if(e[u]<r[u])return-1;if(e[u]>r[u])return 1}return 0},endsAfter(e,r){var t=e.length-1,u=e.slice(0,t),n=r.slice(0,t),a=e[t],i=r[t];return v.equals(u,n)&&a>i},endsAt(e,r){var t=e.length,u=e.slice(0,t),n=r.slice(0,t);return v.equals(u,n)},endsBefore(e,r){var t=e.length-1,u=e.slice(0,t),n=r.slice(0,t),a=e[t],i=r[t];return v.equals(u,n)&&a<i},equals(e,r){return e.length===r.length&&e.every((t,u)=>t===r[u])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,r){return v.compare(e,r)===1},isAncestor(e,r){return e.length<r.length&&v.compare(e,r)===0},isBefore(e,r){return v.compare(e,r)===-1},isChild(e,r){return e.length===r.length+1&&v.compare(e,r)===0},isCommon(e,r){return e.length<=r.length&&v.compare(e,r)===0},isDescendant(e,r){return e.length>r.length&&v.compare(e,r)===0},isParent(e,r){return e.length+1===r.length&&v.compare(e,r)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,r){if(e.length!==r.length)return!1;var t=e.slice(0,-1),u=r.slice(0,-1),n=e[e.length-1],a=r[r.length-1];return n!==a&&v.equals(t,u)},levels(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,u=[],n=0;n<=e.length;n++)u.push(e.slice(0,n));return t&&u.reverse(),u},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var r=e[e.length-1];return e.slice(0,-1).concat(r+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var r=e[e.length-1];if(r<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(r-1)},relative(e,r){if(!v.isAncestor(r,e)&&!v.equals(e,r))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(r,"], because it is not above or equal to the path."));return e.slice(r.length)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var u=[...e],{affinity:n="forward"}=t;if(e.length===0)return u;switch(r.type){case"insert_node":{var{path:a}=r;(v.equals(a,u)||v.endsBefore(a,u)||v.isAncestor(a,u))&&(u[a.length-1]+=1);break}case"remove_node":{var{path:i}=r;if(v.equals(i,u)||v.isAncestor(i,u))return null;v.endsBefore(i,u)&&(u[i.length-1]-=1);break}case"merge_node":{var{path:l,position:c}=r;v.equals(l,u)||v.endsBefore(l,u)?u[l.length-1]-=1:v.isAncestor(l,u)&&(u[l.length-1]-=1,u[l.length]+=c);break}case"split_node":{var{path:f,position:D}=r;if(v.equals(f,u)){if(n==="forward")u[u.length-1]+=1;else if(n!=="backward")return null}else v.endsBefore(f,u)?u[f.length-1]+=1:v.isAncestor(f,u)&&e[f.length]>=D&&(u[f.length-1]+=1,u[f.length]-=D);break}case"move_node":{var{path:h,newPath:d}=r;if(v.equals(h,d))return u;if(v.isAncestor(h,u)||v.equals(h,u)){var s=d.slice();return v.endsBefore(h,d)&&h.length<d.length&&(s[h.length-1]-=1),s.concat(u.slice(h.length))}else v.isSibling(h,d)&&(v.isAncestor(d,u)||v.equals(d,u))?v.endsBefore(h,u)?u[h.length-1]-=1:u[h.length-1]+=1:v.endsBefore(d,u)||v.equals(d,u)||v.isAncestor(d,u)?(v.endsBefore(h,u)&&(u[h.length-1]-=1),u[d.length-1]+=1):v.endsBefore(h,u)&&(v.equals(d,u)&&(u[d.length-1]+=1),u[h.length-1]-=1);break}}return u}},fi={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var n=v.transform(t,r,{affinity:u});e.current=n,n==null&&e.unref()}}};function Bu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Eu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Bu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Bu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var U={compare(e,r){var t=v.compare(e.path,r.path);return t===0?e.offset<r.offset?-1:e.offset>r.offset?1:0:t},isAfter(e,r){return U.compare(e,r)===1},isBefore(e,r){return U.compare(e,r)===-1},equals(e,r){return e.offset===r.offset&&v.equals(e.path,r.path)},isPoint(e){return de(e)&&typeof e.offset=="number"&&v.isPath(e.path)},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Br(e,u=>{if(u===null)return null;var{affinity:n="forward"}=t,{path:a,offset:i}=u;switch(r.type){case"insert_node":case"move_node":{u.path=v.transform(a,r,t);break}case"insert_text":{v.equals(r.path,a)&&(r.offset<i||r.offset===i&&n==="forward")&&(u.offset+=r.text.length);break}case"merge_node":{v.equals(r.path,a)&&(u.offset+=r.position),u.path=v.transform(a,r,t);break}case"remove_text":{v.equals(r.path,a)&&r.offset<=i&&(u.offset-=Math.min(i-r.offset,r.text.length));break}case"remove_node":{if(v.equals(r.path,a)||v.isAncestor(r.path,a))return null;u.path=v.transform(a,r,t);break}case"split_node":{if(v.equals(r.path,a)){if(r.position===i&&n==null)return null;(r.position<i||r.position===i&&n==="forward")&&(u.offset-=r.position,u.path=v.transform(a,r,Eu(Eu({},t),{},{affinity:"forward"})))}else u.path=v.transform(a,r,t);break}}})}},ci={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var n=U.transform(t,r,{affinity:u});e.current=n,n==null&&e.unref()}}},di=["anchor","focus"];function Au(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function vi(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Au(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Au(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var p={edges(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:t=!1}=r,{anchor:u,focus:n}=e;return p.isBackward(e)===t?[u,n]:[n,u]},end(e){var[,r]=p.edges(e);return r},equals(e,r){return U.equals(e.anchor,r.anchor)&&U.equals(e.focus,r.focus)},includes(e,r){if(p.isRange(r)){if(p.includes(e,r.anchor)||p.includes(e,r.focus))return!0;var[t,u]=p.edges(e),[n,a]=p.edges(r);return U.isBefore(t,n)&&U.isAfter(u,a)}var[i,l]=p.edges(e),c=!1,f=!1;return U.isPoint(r)?(c=U.compare(r,i)>=0,f=U.compare(r,l)<=0):(c=v.compare(r,i.path)>=0,f=v.compare(r,l.path)<=0),c&&f},intersection(e,r){var t=ke(e,di),[u,n]=p.edges(e),[a,i]=p.edges(r),l=U.isBefore(u,a)?a:u,c=U.isBefore(n,i)?n:i;return U.isBefore(c,l)?null:vi({anchor:l,focus:c},t)},isBackward(e){var{anchor:r,focus:t}=e;return U.isAfter(r,t)},isCollapsed(e){var{anchor:r,focus:t}=e;return U.equals(r,t)},isExpanded(e){return!p.isCollapsed(e)},isForward(e){return!p.isBackward(e)},isRange(e){return de(e)&&U.isPoint(e.anchor)&&U.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[r]=p.edges(e);return r},transform(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Br(e,u=>{if(u===null)return null;var{affinity:n="inward"}=t,a,i;if(n==="inward"){var l=p.isCollapsed(u);p.isForward(u)?(a="forward",i=l?a:"backward"):(a="backward",i=l?a:"forward")}else n==="outward"?p.isForward(u)?(a="backward",i="forward"):(a="forward",i="backward"):(a=n,i=n);var c=U.transform(u.anchor,r,{affinity:a}),f=U.transform(u.focus,r,{affinity:i});if(!c||!f)return null;u.anchor=c,u.focus=f})}},Di={transform(e,r){var{current:t,affinity:u}=e;if(t!=null){var n=p.transform(t,r,{affinity:u});e.current=n,n==null&&e.unref()}}},Fu=void 0,fe={setScrubber(e){Fu=e},stringify(e){return JSON.stringify(e,Fu)}},Tu=(e,r)=>{for(var t in e){var u=e[t],n=r[t];if(de(u)&&de(n)){if(!Tu(u,n))return!1}else if(Array.isArray(u)&&Array.isArray(n)){if(u.length!==n.length)return!1;for(var a=0;a<u.length;a++)if(u[a]!==n[a])return!1}else if(u!==n)return!1}for(var i in r)if(e[i]===void 0&&r[i]!==void 0)return!1;return!0},hi=["text"],gi=["anchor","focus"];function wu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Pe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?wu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):wu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var I={equals(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:u=!1}=t;function n(a){var i=ke(a,hi);return i}return Tu(u?n(e):e,u?n(r):r)},isText(e){return de(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(r=>I.isText(r))},isTextProps(e){return e.text!==void 0},matches(e,r){for(var t in r)if(t!=="text"&&(!e.hasOwnProperty(t)||e[t]!==r[t]))return!1;return!0},decorations(e,r){var t=[Pe({},e)];for(var u of r){var n=ke(u,gi),[a,i]=p.edges(u),l=[],c=0,f=a.offset,D=i.offset;for(var h of t){var{length:d}=h.text,s=c;if(c+=d,f<=s&&c<=D){Object.assign(h,n),l.push(h);continue}if(f!==D&&(f===c||D===s)||f>c||D<s||D===s&&s!==0){l.push(h);continue}var g=h,m=void 0,B=void 0;if(D<c){var b=D-s;B=Pe(Pe({},g),{},{text:g.text.slice(b)}),g=Pe(Pe({},g),{},{text:g.text.slice(0,b)})}if(f>s){var x=f-s;m=Pe(Pe({},g),{},{text:g.text.slice(0,x)}),g=Pe(Pe({},g),{},{text:g.text.slice(x)})}Object.assign(g,n),m&&l.push(m),l.push(g),B&&l.push(B)}t=l}return t}};function yu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function cr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?yu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Ci=(e,r,t)=>{switch(t.type){case"insert_node":{var{path:u,node:n}=t,a=O.parent(e,u),i=u[u.length-1];if(i>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(u,"] because the destination is past the end of the node."));if(a.children.splice(i,0,n),r)for(var[l,c]of p.points(r))r[c]=U.transform(l,t);break}case"insert_text":{var{path:f,offset:D,text:h}=t;if(h.length===0)break;var d=O.leaf(e,f),s=d.text.slice(0,D),g=d.text.slice(D);if(d.text=s+h+g,r)for(var[m,B]of p.points(r))r[B]=U.transform(m,t);break}case"merge_node":{var{path:b}=t,x=O.get(e,b),R=v.previous(b),M=O.get(e,R),j=O.parent(e,b),P=b[b.length-1];if(I.isText(x)&&I.isText(M))M.text+=x.text;else if(!I.isText(x)&&!I.isText(M))M.children.push(...x.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(b,"] to nodes of different interfaces: ").concat(fe.stringify(x)," ").concat(fe.stringify(M)));if(j.children.splice(P,1),r)for(var[q,S]of p.points(r))r[S]=U.transform(q,t);break}case"move_node":{var{path:_,newPath:K}=t;if(v.isAncestor(_,K))throw new Error("Cannot move a path [".concat(_,"] to new path [").concat(K,"] because the destination is inside itself."));var Q=O.get(e,_),N=O.parent(e,_),k=_[_.length-1];N.children.splice(k,1);var L=v.transform(_,t),T=O.get(e,v.parent(L)),Z=L[L.length-1];if(T.children.splice(Z,0,Q),r)for(var[C,w]of p.points(r))r[w]=U.transform(C,t);break}case"remove_node":{var{path:y}=t,W=y[y.length-1],z=O.parent(e,y);if(z.children.splice(W,1),r)for(var[$,V]of p.points(r)){var Y=U.transform($,t);if(r!=null&&Y!=null)r[V]=Y;else{var ee=void 0,J=void 0;for(var[X,se]of O.texts(e))if(v.compare(se,y)===-1)ee=[X,se];else{J=[X,se];break}var te=!1;ee&&J&&(v.equals(J[1],y)?te=!v.hasPrevious(J[1]):te=v.common(ee[1],y).length<v.common(J[1],y).length),ee&&!te?($.path=ee[1],$.offset=ee[0].text.length):J?($.path=J[1],$.offset=0):r=null}}break}case"remove_text":{var{path:oe,offset:re,text:le}=t;if(le.length===0)break;var ue=O.leaf(e,oe),Re=ue.text.slice(0,re),Be=ue.text.slice(re+le.length);if(ue.text=Re+Be,r)for(var[Ue,ir]of p.points(r))r[ir]=U.transform(Ue,t);break}case"set_node":{var{path:$e,properties:_r,newProperties:Vr}=t;if($e.length===0)throw new Error("Cannot set properties on the root node!");var zr=O.get(e,$e);for(var Ye in Vr){if(Ye==="children"||Ye==="text")throw new Error('Cannot set the "'.concat(Ye,'" property of nodes!'));var zt=Vr[Ye];zt==null?delete zr[Ye]:zr[Ye]=zt}for(var Ht in _r)Vr.hasOwnProperty(Ht)||delete zr[Ht];break}case"set_selection":{var{newProperties:Le}=t;if(Le==null)r=Le;else{if(r==null){if(!p.isRange(Le))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(fe.stringify(Le)," when there is no current selection."));r=cr({},Le)}for(var Ge in Le){var Kt=Le[Ge];if(Kt==null){if(Ge==="anchor"||Ge==="focus")throw new Error('Cannot remove the "'.concat(Ge,'" selection property'));delete r[Ge]}else r[Ge]=Kt}}break}case"split_node":{var{path:Ze,position:gr,properties:Ut}=t;if(Ze.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(Ze,"] because the root node cannot be split."));var We=O.get(e,Ze),da=O.parent(e,Ze),va=Ze[Ze.length-1],Hr;if(I.isText(We)){var Da=We.text.slice(0,gr),ha=We.text.slice(gr);We.text=Da,Hr=cr(cr({},Ut),{},{text:ha})}else{var ga=We.children.slice(0,gr),Ca=We.children.slice(gr);We.children=ga,Hr=cr(cr({},Ut),{},{children:Ca})}if(da.children.splice(va+1,0,Hr),r)for(var[pa,ma]of p.points(r))r[ma]=U.transform(pa,t);break}}return r},pi={transform(e,r){e.children=st(e.children);var t=e.selection&&st(e.selection);try{t=Ci(e,t,r)}finally{e.children=ot(e.children),t?e.selection=je(t)?ot(t):t:e.selection=null}}},mi=["text"],Bi=["children"];function bu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Ou(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?bu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):bu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Ei={insertNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:n=!1,mode:a="lowest"}=t,{at:i,match:l,select:c}=t;if(O.isNode(r)&&(r=[r]),r.length!==0){var[f]=r;if(i||(e.selection?i=e.selection:e.children.length>0?i=o.end(e,[]):i=[0],c=!0),c==null&&(c=!1),p.isRange(i))if(u||(i=o.unhangRange(e,i,{voids:n})),p.isCollapsed(i))i=i.anchor;else{var[,D]=p.edges(i),h=o.pointRef(e,D);F.delete(e,{at:i}),i=h.unref()}if(U.isPoint(i)){l==null&&(I.isText(f)?l=P=>I.isText(P):e.isInline(f)?l=P=>I.isText(P)||o.isInline(e,P):l=P=>o.isBlock(e,P));var[d]=o.nodes(e,{at:i.path,match:l,mode:a,voids:n});if(d){var[,s]=d,g=o.pathRef(e,s),m=o.isEnd(e,i,s);F.splitNodes(e,{at:i,match:l,mode:a,voids:n});var B=g.unref();i=m?v.next(B):B}else return}var b=v.parent(i),x=i[i.length-1];if(!(!n&&o.void(e,{at:b}))){for(var R of r){var M=b.concat(x);x++,e.apply({type:"insert_node",path:M,node:R}),i=v.next(i)}if(i=v.previous(i),c){var j=o.end(e,i);j&&F.select(e,j)}}}})},liftNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{at:t=e.selection,mode:u="lowest",voids:n=!1}=r,{match:a}=r;if(a==null&&(a=v.isPath(t)?er(e,t):R=>o.isBlock(e,R)),!!t){var i=o.nodes(e,{at:t,match:a,mode:u,voids:n}),l=Array.from(i,R=>{var[,M]=R;return o.pathRef(e,M)});for(var c of l){var f=c.unref();if(f.length<2)throw new Error("Cannot lift node at a path [".concat(f,"] because it has a depth of less than `2`."));var D=o.node(e,v.parent(f)),[h,d]=D,s=f[f.length-1],{length:g}=h.children;if(g===1){var m=v.next(d);F.moveNodes(e,{at:f,to:m,voids:n}),F.removeNodes(e,{at:d,voids:n})}else if(s===0)F.moveNodes(e,{at:f,to:d,voids:n});else if(s===g-1){var B=v.next(d);F.moveNodes(e,{at:f,to:B,voids:n})}else{var b=v.next(f),x=v.next(d);F.splitNodes(e,{at:b,voids:n}),F.moveNodes(e,{at:f,to:x,voids:n})}}}})},mergeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{match:t,at:u=e.selection}=r,{hanging:n=!1,voids:a=!1,mode:i="lowest"}=r;if(!!u){if(t==null)if(v.isPath(u)){var[l]=o.parent(e,u);t=_=>l.children.includes(_)}else t=_=>o.isBlock(e,_);if(!n&&p.isRange(u)&&(u=o.unhangRange(e,u,{voids:a})),p.isRange(u))if(p.isCollapsed(u))u=u.anchor;else{var[,c]=p.edges(u),f=o.pointRef(e,c);F.delete(e,{at:u}),u=f.unref(),r.at==null&&F.select(e,u)}var[D]=o.nodes(e,{at:u,match:t,voids:a,mode:i}),h=o.previous(e,{at:u,match:t,voids:a,mode:i});if(!(!D||!h)){var[d,s]=D,[g,m]=h;if(!(s.length===0||m.length===0)){var B=v.next(m),b=v.common(s,m),x=v.isSibling(s,m),R=Array.from(o.levels(e,{at:s}),_=>{var[K]=_;return K}).slice(b.length).slice(0,-1),M=o.above(e,{at:s,mode:"highest",match:_=>R.includes(_)&&Ru(e,_)}),j=M&&o.pathRef(e,M[1]),P,q;if(I.isText(d)&&I.isText(g)){var S=ke(d,mi);q=g.text.length,P=S}else if(G.isElement(d)&&G.isElement(g)){var S=ke(d,Bi);q=g.children.length,P=S}else throw new Error("Cannot merge the node at path [".concat(s,"] with the previous sibling because it is not the same kind: ").concat(fe.stringify(d)," ").concat(fe.stringify(g)));x||F.moveNodes(e,{at:s,to:B,voids:a}),j&&F.removeNodes(e,{at:j.current,voids:a}),G.isElement(g)&&o.isEmpty(e,g)||I.isText(g)&&g.text===""&&m[m.length-1]!==0?F.removeNodes(e,{at:m,voids:a}):e.apply({type:"merge_node",path:B,position:q,properties:P}),j&&j.unref()}}}})},moveNodes(e,r){o.withoutNormalizing(e,()=>{var{to:t,at:u=e.selection,mode:n="lowest",voids:a=!1}=r,{match:i}=r;if(!!u){i==null&&(i=v.isPath(u)?er(e,u):s=>o.isBlock(e,s));var l=o.pathRef(e,t),c=o.nodes(e,{at:u,match:i,mode:n,voids:a}),f=Array.from(c,s=>{var[,g]=s;return o.pathRef(e,g)});for(var D of f){var h=D.unref(),d=l.current;h.length!==0&&e.apply({type:"move_node",path:h,newPath:d}),l.current&&v.isSibling(d,h)&&v.isAfter(d,h)&&(l.current=v.next(l.current))}l.unref()}})},removeNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{hanging:t=!1,voids:u=!1,mode:n="lowest"}=r,{at:a=e.selection,match:i}=r;if(!!a){i==null&&(i=v.isPath(a)?er(e,a):d=>o.isBlock(e,d)),!t&&p.isRange(a)&&(a=o.unhangRange(e,a,{voids:u}));var l=o.nodes(e,{at:a,match:i,mode:n,voids:u}),c=Array.from(l,d=>{var[,s]=d;return o.pathRef(e,s)});for(var f of c){var D=f.unref();if(D){var[h]=o.node(e,D);e.apply({type:"remove_node",path:D,node:h})}}}})},setNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{match:u,at:n=e.selection,compare:a,merge:i}=t,{hanging:l=!1,mode:c="lowest",split:f=!1,voids:D=!1}=t;if(!!n){if(u==null&&(u=v.isPath(n)?er(e,n):q=>o.isBlock(e,q)),!l&&p.isRange(n)&&(n=o.unhangRange(e,n,{voids:D})),f&&p.isRange(n)){if(p.isCollapsed(n)&&o.leaf(e,n.anchor)[0].text.length>0)return;var h=o.rangeRef(e,n,{affinity:"inward"}),[d,s]=p.edges(n),g=c==="lowest"?"lowest":"highest",m=o.isEnd(e,s,s.path);F.splitNodes(e,{at:s,match:u,mode:g,voids:D,always:!m});var B=o.isStart(e,d,d.path);F.splitNodes(e,{at:d,match:u,mode:g,voids:D,always:!B}),n=h.unref(),t.at==null&&F.select(e,n)}a||(a=(q,S)=>q!==S);for(var[b,x]of o.nodes(e,{at:n,match:u,mode:c,voids:D})){var R={},M={};if(x.length!==0){var j=!1;for(var P in r)P==="children"||P==="text"||a(r[P],b[P])&&(j=!0,b.hasOwnProperty(P)&&(R[P]=b[P]),i?r[P]!=null&&(M[P]=i(b[P],r[P])):r[P]!=null&&(M[P]=r[P]));j&&e.apply({type:"set_node",path:x,properties:R,newProperties:M})}}}})},splitNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:t="lowest",voids:u=!1}=r,{match:n,at:a=e.selection,height:i=0,always:l=!1}=r;if(n==null&&(n=w=>o.isBlock(e,w)),p.isRange(a)&&(a=Ai(e,a)),v.isPath(a)){var c=a,f=o.point(e,c),[D]=o.parent(e,c);n=w=>w===D,i=f.path.length-c.length+1,a=f,l=!0}if(!!a){var h=o.pointRef(e,a,{affinity:"backward"}),d;try{var[s]=o.nodes(e,{at:a,match:n,mode:t,voids:u});if(!s)return;var g=o.void(e,{at:a,mode:"highest"}),m=0;if(!u&&g){var[B,b]=g;if(G.isElement(B)&&e.isInline(B)){var x=o.after(e,b);if(!x){var R={text:""},M=v.next(b);F.insertNodes(e,R,{at:M,voids:u}),x=o.point(e,M)}a=x,l=!0}var j=a.path.length-b.length;i=j+1,l=!0}d=o.pointRef(e,a);var P=a.path.length-i,[,q]=s,S=a.path.slice(0,P),_=i===0?a.offset:a.path[P]+m;for(var[K,Q]of o.levels(e,{at:S,reverse:!0,voids:u})){var N=!1;if(Q.length<q.length||Q.length===0||!u&&o.isVoid(e,K))break;var k=h.current,L=o.isEnd(e,k,Q);if(l||!h||!o.isEdge(e,k,Q)){N=!0;var T=O.extractProps(K);e.apply({type:"split_node",path:Q,position:_,properties:T})}_=Q[Q.length-1]+(N||L?1:0)}if(r.at==null){var Z=d.current||o.end(e,[]);F.select(e,Z)}}finally{var C;h.unref(),(C=d)===null||C===void 0||C.unref()}}})},unsetNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(r)||(r=[r]);var u={};for(var n of r)u[n]=null;F.setNodes(e,u,t)},unwrapNodes(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{mode:t="lowest",split:u=!1,voids:n=!1}=r,{at:a=e.selection,match:i}=r;if(!!a){i==null&&(i=v.isPath(a)?er(e,a):d=>o.isBlock(e,d)),v.isPath(a)&&(a=o.range(e,a));var l=p.isRange(a)?o.rangeRef(e,a):null,c=o.nodes(e,{at:a,match:i,mode:t,voids:n}),f=Array.from(c,d=>{var[,s]=d;return o.pathRef(e,s)}).reverse(),D=function(s){var g=s.unref(),[m]=o.node(e,g),B=o.range(e,g);u&&l&&(B=p.intersection(l.current,B)),F.liftNodes(e,{at:B,match:b=>G.isAncestor(m)&&m.children.includes(b),voids:n})};for(var h of f)D(h);l&&l.unref()}})},wrapNodes(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{mode:u="lowest",split:n=!1,voids:a=!1}=t,{match:i,at:l=e.selection}=t;if(!!l){if(i==null&&(v.isPath(l)?i=er(e,l):e.isInline(r)?i=B=>o.isInline(e,B)||I.isText(B):i=B=>o.isBlock(e,B)),n&&p.isRange(l)){var[c,f]=p.edges(l),D=o.rangeRef(e,l,{affinity:"inward"});F.splitNodes(e,{at:f,match:i,voids:a}),F.splitNodes(e,{at:c,match:i,voids:a}),l=D.unref(),t.at==null&&F.select(e,l)}var h=Array.from(o.nodes(e,{at:l,match:e.isInline(r)?B=>o.isBlock(e,B):B=>o.isEditor(B),mode:"lowest",voids:a}));for(var[,d]of h){var s=p.isRange(l)?p.intersection(l,o.range(e,d)):l;if(!!s){var g=Array.from(o.nodes(e,{at:s,match:i,mode:u,voids:a}));if(g.length>0){var m=function(){var[B]=g,b=g[g.length-1],[,x]=B,[,R]=b;if(x.length===0&&R.length===0)return"continue";var M=v.equals(x,R)?v.parent(x):v.common(x,R),j=o.range(e,x,R),P=o.node(e,M),[q]=P,S=M.length+1,_=v.next(R.slice(0,S)),K=Ou(Ou({},r),{},{children:[]});F.insertNodes(e,K,{at:_,voids:a}),F.moveNodes(e,{at:j,match:Q=>G.isAncestor(q)&&q.children.includes(Q),to:_.concat(0),voids:a})}();if(m==="continue")continue}}}}})}},Ru=(e,r)=>{if(G.isElement(r)){var t=r;return o.isVoid(e,r)?!0:t.children.length===1?Ru(e,t.children[0]):!1}else return!o.isEditor(r)},Ai=(e,r)=>{if(p.isCollapsed(r))return r.anchor;var[,t]=p.edges(r),u=o.pointRef(e,t);return F.delete(e,{at:r}),u.unref()},er=(e,r)=>{var[t]=o.node(e,r);return u=>u===t};function xu(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Pu(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?xu(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):xu(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Fi={collapse(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:t="anchor"}=r,{selection:u}=e;if(u){if(t==="anchor")F.select(e,u.anchor);else if(t==="focus")F.select(e,u.focus);else if(t==="start"){var[n]=p.edges(u);F.select(e,n)}else if(t==="end"){var[,a]=p.edges(u);F.select(e,a)}}else return},deselect(e){var{selection:r}=e;r&&e.apply({type:"set_selection",properties:r,newProperties:null})},move(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:t}=e,{distance:u=1,unit:n="character",reverse:a=!1}=r,{edge:i=null}=r;if(!!t){i==="start"&&(i=p.isBackward(t)?"focus":"anchor"),i==="end"&&(i=p.isBackward(t)?"anchor":"focus");var{anchor:l,focus:c}=t,f={distance:u,unit:n},D={};if(i==null||i==="anchor"){var h=a?o.before(e,l,f):o.after(e,l,f);h&&(D.anchor=h)}if(i==null||i==="focus"){var d=a?o.before(e,c,f):o.after(e,c,f);d&&(D.focus=d)}F.setSelection(e,D)}},select(e,r){var{selection:t}=e;if(r=o.range(e,r),t){F.setSelection(e,r);return}if(!p.isRange(r))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(fe.stringify(r)));e.apply({type:"set_selection",properties:t,newProperties:r})},setPoint(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:u}=e,{edge:n="both"}=t;if(!!u){n==="start"&&(n=p.isBackward(u)?"focus":"anchor"),n==="end"&&(n=p.isBackward(u)?"anchor":"focus");var{anchor:a,focus:i}=u,l=n==="anchor"?a:i;F.setSelection(e,{[n==="anchor"?"anchor":"focus"]:Pu(Pu({},l),r)})}},setSelection(e,r){var{selection:t}=e,u={},n={};if(!!t){for(var a in r)(a==="anchor"&&r.anchor!=null&&!U.equals(r.anchor,t.anchor)||a==="focus"&&r.focus!=null&&!U.equals(r.focus,t.focus)||a!=="anchor"&&a!=="focus"&&r[a]!==t[a])&&(u[a]=t[a],n[a]=r[a]);Object.keys(u).length>0&&e.apply({type:"set_selection",properties:u,newProperties:n})}}},wi={delete(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};o.withoutNormalizing(e,()=>{var{reverse:t=!1,unit:u="character",distance:n=1,voids:a=!1}=r,{at:i=e.selection,hanging:l=!1}=r;if(!!i){var c=!1;if(p.isRange(i)&&p.isCollapsed(i)&&(c=!0,i=i.anchor),U.isPoint(i)){var f=o.void(e,{at:i,mode:"highest"});if(!a&&f){var[,D]=f;i=D}else{var h={unit:u,distance:n},d=t?o.before(e,i,h)||o.start(e,[]):o.after(e,i,h)||o.end(e,[]);i={anchor:i,focus:d},l=!0}}if(v.isPath(i)){F.removeNodes(e,{at:i,voids:a});return}if(!p.isCollapsed(i)){if(!l){var[,s]=p.edges(i),g=o.end(e,[]);U.equals(s,g)||(i=o.unhangRange(e,i,{voids:a}))}var[m,B]=p.edges(i),b=o.above(e,{match:re=>o.isBlock(e,re),at:m,voids:a}),x=o.above(e,{match:re=>o.isBlock(e,re),at:B,voids:a}),R=b&&x&&!v.equals(b[1],x[1]),M=v.equals(m.path,B.path),j=a?null:o.void(e,{at:m,mode:"highest"}),P=a?null:o.void(e,{at:B,mode:"highest"});if(j){var q=o.before(e,m);q&&b&&v.isAncestor(b[1],q.path)&&(m=q)}if(P){var S=o.after(e,B);S&&x&&v.isAncestor(x[1],S.path)&&(B=S)}var _=[],K;for(var Q of o.nodes(e,{at:i,voids:a})){var[N,k]=Q;K&&v.compare(k,K)===0||(!a&&o.isVoid(e,N)||!v.isCommon(k,m.path)&&!v.isCommon(k,B.path))&&(_.push(Q),K=k)}var L=Array.from(_,re=>{var[,le]=re;return o.pathRef(e,le)}),T=o.pointRef(e,m),Z=o.pointRef(e,B),C="";if(!M&&!j){var w=T.current,[y]=o.leaf(e,w),{path:W}=w,{offset:z}=m,$=y.text.slice(z);$.length>0&&(e.apply({type:"remove_text",path:W,offset:z,text:$}),C=$)}if(L.reverse().map(re=>re.unref()).filter(re=>re!==null).forEach(re=>F.removeNodes(e,{at:re,voids:a})),!P){var V=Z.current,[Y]=o.leaf(e,V),{path:ee}=V,J=M?m.offset:0,X=Y.text.slice(J,B.offset);X.length>0&&(e.apply({type:"remove_text",path:ee,offset:J,text:X}),C=X)}!M&&R&&Z.current&&T.current&&F.mergeNodes(e,{at:Z.current,hanging:!0,voids:a}),c&&t&&u==="character"&&C.length>1&&C.match(/[\u0E00-\u0E7F]+/)&&F.insertText(e,C.slice(0,C.length-n));var se=T.unref(),te=Z.unref(),oe=t?se||te:te||se;r.at==null&&oe&&F.select(e,oe)}}})},insertFragment(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{hanging:u=!1,voids:n=!1}=t,{at:a=e.selection}=t;if(!!r.length){if(a)if(p.isRange(a))if(u||(a=o.unhangRange(e,a,{voids:n})),p.isCollapsed(a))a=a.anchor;else{var[,i]=p.edges(a);if(!n&&o.void(e,{at:i}))return;var l=o.pointRef(e,i);F.delete(e,{at:a}),a=l.unref()}else v.isPath(a)&&(a=o.start(e,a));else return;if(!(!n&&o.void(e,{at:a}))){var c=o.above(e,{at:a,match:V=>o.isInline(e,V),mode:"highest",voids:n});if(c){var[,f]=c;if(o.isEnd(e,a,f)){var D=o.after(e,f);a=D}else if(o.isStart(e,a,f)){var h=o.before(e,f);a=h}}var d=o.above(e,{match:V=>o.isBlock(e,V),at:a,voids:n}),[,s]=d,g=o.isStart(e,a,s),m=o.isEnd(e,a,s),B=g&&m,b=!g||g&&m,x=!m,[,R]=O.first({children:r},[]),[,M]=O.last({children:r},[]),j=[],P=V=>{var[Y,ee]=V,J=ee.length===0;return J?!1:B?!0:!(b&&v.isAncestor(ee,R)&&G.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y)||x&&v.isAncestor(ee,M)&&G.isElement(Y)&&!e.isVoid(Y)&&!e.isInline(Y))};for(var q of O.nodes({children:r},{pass:P}))P(q)&&j.push(q);var S=[],_=[],K=[],Q=!0,N=!1;for(var[k]of j)G.isElement(k)&&!e.isInline(k)?(Q=!1,N=!0,_.push(k)):Q?S.push(k):K.push(k);var[L]=o.nodes(e,{at:a,match:V=>I.isText(V)||o.isInline(e,V),mode:"highest",voids:n}),[,T]=L,Z=o.isStart(e,a,T),C=o.isEnd(e,a,T),w=o.pathRef(e,m&&!K.length?v.next(s):s),y=o.pathRef(e,C?v.next(T):T);F.splitNodes(e,{at:a,match:V=>N?o.isBlock(e,V):I.isText(V)||o.isInline(e,V),mode:N?"lowest":"highest",always:N&&(!g||S.length>0)&&(!m||K.length>0),voids:n});var W=o.pathRef(e,!Z||Z&&C?v.next(T):T);if(F.insertNodes(e,S,{at:W.current,match:V=>I.isText(V)||o.isInline(e,V),mode:"highest",voids:n}),B&&!S.length&&_.length&&!K.length&&F.delete(e,{at:s,voids:n}),F.insertNodes(e,_,{at:w.current,match:V=>o.isBlock(e,V),mode:"lowest",voids:n}),F.insertNodes(e,K,{at:y.current,match:V=>I.isText(V)||o.isInline(e,V),mode:"highest",voids:n}),!t.at){var z;if(K.length>0&&y.current?z=v.previous(y.current):_.length>0&&w.current?z=v.previous(w.current):W.current&&(z=v.previous(W.current)),z){var $=o.end(e,z);F.select(e,$)}}W.unref(),w.unref(),y.unref()}}})},insertText(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};o.withoutNormalizing(e,()=>{var{voids:u=!1}=t,{at:n=e.selection}=t;if(!!n){if(v.isPath(n)&&(n=o.range(e,n)),p.isRange(n))if(p.isCollapsed(n))n=n.anchor;else{var a=p.end(n);if(!u&&o.void(e,{at:a}))return;var i=p.start(n),l=o.pointRef(e,i),c=o.pointRef(e,a);F.delete(e,{at:n,voids:u});var f=l.unref(),D=c.unref();n=f||D,F.setSelection(e,{anchor:n,focus:n})}if(!(!u&&o.void(e,{at:n}))){var{path:h,offset:d}=n;r.length>0&&e.apply({type:"insert_text",path:h,offset:d,text:r})}}})}};function Su(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Ar(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Su(Object(t),!0).forEach(function(u){ye(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Su(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var F=Ar(Ar(Ar(Ar({},pi),Ei),Fi),wi);function ju(e){return Object.prototype.toString.call(e)==="[object Object]"}function Mu(e){var r,t;return ju(e)===!1?!1:(r=e.constructor,r===void 0?!0:(t=r.prototype,!(ju(t)===!1||t.hasOwnProperty("isPrototypeOf")===!1)))}var yi={isHistory(e){return Mu(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||Se.isOperationList(e.redos[0].operations))&&(e.undos.length===0||Se.isOperationList(e.undos[0].operations))}};var ct=new WeakMap,dt=new WeakMap,tr={isHistoryEditor(e){return yi.isHistory(e.history)&&o.isEditor(e)},isMerging(e){return dt.get(e)},isSaving(e){return ct.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,r){var t=tr.isMerging(e);dt.set(e,!1),r(),dt.set(e,t)},withoutSaving(e,r){var t=tr.isSaving(e);ct.set(e,!1),r(),ct.set(e,t)}},Nu=e=>{var r=e,{apply:t}=r;return r.history={undos:[],redos:[]},r.redo=()=>{var{history:u}=r,{redos:n}=u;if(n.length>0){var a=n[n.length-1];a.selectionBefore&&F.setSelection(r,a.selectionBefore),tr.withoutSaving(r,()=>{o.withoutNormalizing(r,()=>{for(var i of a.operations)r.apply(i)})}),u.redos.pop(),u.undos.push(a)}},r.undo=()=>{var{history:u}=r,{undos:n}=u;if(n.length>0){var a=n[n.length-1];tr.withoutSaving(r,()=>{o.withoutNormalizing(r,()=>{var i=a.operations.map(Se.inverse).reverse();for(var l of i)r.apply(l);a.selectionBefore&&F.setSelection(r,a.selectionBefore)})}),u.redos.push(a),u.undos.pop()}},r.apply=u=>{var{operations:n,history:a}=r,{undos:i}=a,l=i[i.length-1],c=l&&l.operations[l.operations.length-1],f=tr.isSaving(r),D=tr.isMerging(r);if(f==null&&(f=Oi(u)),f){if(D==null&&(l==null?D=!1:n.length!==0?D=!0:D=bi(u,c)),l&&D)l.operations.push(u);else{var h={operations:[u],selectionBefore:r.selection};i.push(h)}for(;i.length>100;)i.shift();a.redos=[]}t(u)},r},bi=(e,r)=>!!(r&&e.type==="insert_text"&&r.type==="insert_text"&&e.offset===r.offset+r.text.length&&v.equals(e.path,r.path)||r&&e.type==="remove_text"&&r.type==="remove_text"&&e.offset+e.text.length===r.offset&&v.equals(e.path,r.path)),Oi=(e,r)=>e.type!=="set_selection";var Rt=ve(qu()),_n=ve(gt()),Vn=ve(Bn()),A=ve($t());function En(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function An(e,r){return(!r||e!=="hidden")&&e!=="visible"&&e!=="clip"}function Ct(e,r){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var t=getComputedStyle(e,null);return An(t.overflowY,r)||An(t.overflowX,r)||function(u){var n=function(a){if(!a.ownerDocument||!a.ownerDocument.defaultView)return null;try{return a.ownerDocument.defaultView.frameElement}catch{return null}}(u);return!!n&&(n.clientHeight<u.scrollHeight||n.clientWidth<u.scrollWidth)}(e)}return!1}function br(e,r,t,u,n,a,i,l){return a<e&&i>r||a>e&&i<r?0:a<=e&&l<=t||i>=r&&l>=t?a-e-u:i>r&&l<t||a<e&&l>t?i-r+n:0}var pt=function(e,r){var t=window,u=r.scrollMode,n=r.block,a=r.inline,i=r.boundary,l=r.skipOverflowHiddenElements,c=typeof i=="function"?i:function(Re){return Re!==i};if(!En(e))throw new TypeError("Invalid target");for(var f,D,h=document.scrollingElement||document.documentElement,d=[],s=e;En(s)&&c(s);){if((s=(D=(f=s).parentElement)==null?f.getRootNode().host||null:D)===h){d.push(s);break}s!=null&&s===document.body&&Ct(s)&&!Ct(document.documentElement)||s!=null&&Ct(s,l)&&d.push(s)}for(var g=t.visualViewport?t.visualViewport.width:innerWidth,m=t.visualViewport?t.visualViewport.height:innerHeight,B=window.scrollX||pageXOffset,b=window.scrollY||pageYOffset,x=e.getBoundingClientRect(),R=x.height,M=x.width,j=x.top,P=x.right,q=x.bottom,S=x.left,_=n==="start"||n==="nearest"?j:n==="end"?q:j+R/2,K=a==="center"?S+M/2:a==="end"?P:S,Q=[],N=0;N<d.length;N++){var k=d[N],L=k.getBoundingClientRect(),T=L.height,Z=L.width,C=L.top,w=L.right,y=L.bottom,W=L.left;if(u==="if-needed"&&j>=0&&S>=0&&q<=m&&P<=g&&j>=C&&q<=y&&S>=W&&P<=w)return Q;var z=getComputedStyle(k),$=parseInt(z.borderLeftWidth,10),V=parseInt(z.borderTopWidth,10),Y=parseInt(z.borderRightWidth,10),ee=parseInt(z.borderBottomWidth,10),J=0,X=0,se="offsetWidth"in k?k.offsetWidth-k.clientWidth-$-Y:0,te="offsetHeight"in k?k.offsetHeight-k.clientHeight-V-ee:0,oe="offsetWidth"in k?k.offsetWidth===0?0:Z/k.offsetWidth:0,re="offsetHeight"in k?k.offsetHeight===0?0:T/k.offsetHeight:0;if(h===k)J=n==="start"?_:n==="end"?_-m:n==="nearest"?br(b,b+m,m,V,ee,b+_,b+_+R,R):_-m/2,X=a==="start"?K:a==="center"?K-g/2:a==="end"?K-g:br(B,B+g,g,$,Y,B+K,B+K+M,M),J=Math.max(0,J+b),X=Math.max(0,X+B);else{J=n==="start"?_-C-V:n==="end"?_-y+ee+te:n==="nearest"?br(C,y,T,V,ee+te,_,_+R,R):_-(C+T/2)+te/2,X=a==="start"?K-W-$:a==="center"?K-(W+Z/2)+se/2:a==="end"?K-w+Y+se:br(W,w,Z,$,Y+se,K,K+M,M);var le=k.scrollLeft,ue=k.scrollTop;_+=ue-(J=Math.max(0,Math.min(ue+J/re,k.scrollHeight-T/re+te))),K+=le-(X=Math.max(0,Math.min(le+X/oe,k.scrollWidth-Z/oe+se)))}Q.push({el:k,top:J,left:X})}return Q};function Fn(e){return e===Object(e)&&Object.keys(e).length!==0}function Fs(e,r){r===void 0&&(r="auto");var t="scrollBehavior"in document.body.style;e.forEach(function(u){var n=u.el,a=u.top,i=u.left;n.scroll&&t?n.scroll({top:a,left:i,behavior:r}):(n.scrollTop=a,n.scrollLeft=i)})}function ws(e){return e===!1?{block:"end",inline:"nearest"}:Fn(e)?e:{block:"start",inline:"nearest"}}function ys(e,r){var t=e.isConnected||e.ownerDocument.documentElement.contains(e);if(Fn(r)&&typeof r.behavior=="function")return r.behavior(t?pt(e,r):[]);if(!!t){var u=ws(r);return Fs(pt(e,u),u.behavior)}}var wn=ys;var kr=ve(Pn()),zn=ve(Ba());function Nr(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Ss(e,r){if(e==null)return{};var t={},u=Object.keys(e),n,a;for(a=0;a<u.length;a++)n=u[a],!(r.indexOf(n)>=0)&&(t[n]=e[n]);return t}function ur(e,r){if(e==null)return{};var t=Ss(e,r),u,n;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)u=a[n],!(r.indexOf(u)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,u)||(t[u]=e[u]))}return t}var ks=0,wt=class{constructor(){this.id="".concat(ks++)}},jt=new WeakMap,Mt=new WeakMap,Hn=new WeakMap,yt=new WeakMap,Tr=new WeakMap,Ir=new WeakMap,nr=new WeakMap,bt=new WeakMap,Lr=new WeakMap,jr=new WeakMap,Ot=new WeakMap,Ve=new WeakMap,ze=new WeakMap,Dr=new WeakMap,xt=new WeakMap,Nt=new WeakMap,Ae=new WeakMap,Te=new WeakMap,he=new WeakMap,Ne=new WeakMap,Ie=new WeakMap,Kn=new WeakMap,ar=Symbol("placeholder"),Un=Symbol("mark-placeholder"),Ts=globalThis.Text,It=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,Rs=e=>Ke(e)&&e.nodeType===8,me=e=>Ke(e)&&e.nodeType===1,Ke=e=>{var r=It(e);return!!r&&e instanceof r.Node},Pt=e=>{var r=e&&e.anchorNode&&It(e.anchorNode);return!!r&&e instanceof r.Selection},$n=e=>Ke(e)&&e.nodeType===3,js=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,Ms=e=>{var[r,t]=e;if(me(r)&&r.childNodes.length){var u=t===r.childNodes.length,n=u?t-1:t;for([r,n]=Yn(r,n,u?"backward":"forward"),u=n<t;me(r)&&r.childNodes.length;){var a=u?r.childNodes.length-1:0;r=Is(r,a,u?"backward":"forward")}t=u&&r.textContent!=null?r.textContent.length:0}return[r,t]},Ns=e=>{for(var r=e&&e.parentNode;r;){if(r.toString()==="[object ShadowRoot]")return!0;r=r.parentNode}return!1},Yn=(e,r,t)=>{for(var{childNodes:u}=e,n=u[r],a=r,i=!1,l=!1;(Rs(n)||me(n)&&n.childNodes.length===0||me(n)&&n.getAttribute("contenteditable")==="false")&&!(i&&l);){if(a>=u.length){i=!0,a=r-1,t="backward";continue}if(a<0){l=!0,a=r+1,t="forward";continue}n=u[a],r=a,a+=t==="forward"?1:-1}return[n,r]},Is=(e,r,t)=>{var[u]=Yn(e,r,t);return u},Gn=e=>{var r="";if($n(e)&&e.nodeValue)return e.nodeValue;if(me(e)){for(var t of Array.from(e.childNodes))r+=Gn(t);var u=getComputedStyle(e).getPropertyValue("display");(u==="block"||u==="list"||e.tagName==="BR")&&(r+=`
`)}return r},Ls=/data-slate-fragment="(.+?)"/m,Ws=e=>{var r=e.getData("text/html"),[,t]=r.match(Ls)||[];return t},Lt=(e,r,t)=>{var{target:u}=r;if(me(u)&&u.matches('[contentEditable="false"]'))return!1;var{document:n}=E.getWindow(e);if(n.contains(u))return E.hasDOMNode(e,u,{editable:!0});var a=t.find(i=>{var{addedNodes:l,removedNodes:c}=i;for(var f of l)if(f===u||f.contains(u))return!0;for(var D of c)if(D===u||D.contains(u))return!0});return!a||a===r?!1:Lt(e,a,t)},qs=parseInt(A.default.version.split(".")[0],10)>=17,_s=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,Sn=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),Fe=typeof navigator<"u"&&/Android/.test(navigator.userAgent),St=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Et=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Vs=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Zn=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),zs=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),Hs=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),Ks=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Us=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),Rr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Me=!zs&&!Vs&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",E={isComposing(e){return!!ze.get(e)},getWindow(e){var r=Hn.get(e);if(!r)throw new Error("Unable to find a host window element for this editor");return r},findKey(e,r){var t=bt.get(r);return t||(t=new wt,bt.set(r,t)),t},findPath(e,r){for(var t=[],u=r;;){var n=Mt.get(u);if(n==null){if(o.isEditor(u))return t;break}var a=jt.get(u);if(a==null)break;t.unshift(a),u=n}throw new Error("Unable to find the path for Slate node: ".concat(fe.stringify(r)))},findDocumentOrShadowRoot(e){var r=E.toDOMNode(e,e),t=r.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&t.getSelection!=null?t:r.ownerDocument},isFocused(e){return!!Ve.get(e)},isReadOnly(e){return!!Ot.get(e)},blur(e){var r=E.toDOMNode(e,e),t=E.findDocumentOrShadowRoot(e);Ve.set(e,!1),t.activeElement===r&&r.blur()},focus(e){var r=E.toDOMNode(e,e),t=E.findDocumentOrShadowRoot(e);Ve.set(e,!0),t.activeElement!==r&&r.focus({preventScroll:!0})},deselect(e){var{selection:r}=e,t=E.findDocumentOrShadowRoot(e),u=t.getSelection();u&&u.rangeCount>0&&u.removeAllRanges(),r&&F.deselect(e)},hasDOMNode(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:u=!1}=t,n=E.toDOMNode(e,e),a;try{a=me(r)?r:r.parentElement}catch(i){if(!i.message.includes('Permission denied to access property "nodeType"'))throw i}return a?a.closest("[data-slate-editor]")===n&&(!u||a.isContentEditable?!0:typeof a.isContentEditable=="boolean"&&a.closest('[contenteditable="false"]')===n||!!a.getAttribute("data-slate-zero-width")):!1},insertData(e,r){e.insertData(r)},insertFragmentData(e,r){return e.insertFragmentData(r)},insertTextData(e,r){return e.insertTextData(r)},setFragmentData(e,r,t){e.setFragmentData(r,t)},toDOMNode(e,r){var t=Lr.get(e),u=o.isEditor(r)?yt.get(e):t?.get(E.findKey(e,r));if(!u)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(fe.stringify(r)));return u},toDOMPoint(e,r){var[t]=o.node(e,r.path),u=E.toDOMNode(e,t),n;o.void(e,{at:r})&&(r={path:r.path,offset:0});for(var a="[data-slate-string], [data-slate-zero-width]",i=Array.from(u.querySelectorAll(a)),l=0,c=0;c<i.length;c++){var f=i[c],D=f.childNodes[0];if(!(D==null||D.textContent==null)){var{length:h}=D.textContent,d=f.getAttribute("data-slate-length"),s=d==null?h:parseInt(d,10),g=l+s,m=i[c+1];if(r.offset===g&&m!==null&&m!==void 0&&m.hasAttribute("data-slate-mark-placeholder")){var B,b=m.childNodes[0];n=[b instanceof Ts?b:m,(B=m.textContent)!==null&&B!==void 0&&B.startsWith("\uFEFF")?1:0];break}if(r.offset<=g){var x=Math.min(h,Math.max(0,r.offset-l));n=[D,x];break}l=g}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(fe.stringify(r)));return n},toDOMRange(e,r){var{anchor:t,focus:u}=r,n=p.isBackward(r),a=E.toDOMPoint(e,t),i=p.isCollapsed(r)?a:E.toDOMPoint(e,u),l=E.getWindow(e),c=l.document.createRange(),[f,D]=n?i:a,[h,d]=n?a:i,s=me(f)?f:f.parentElement,g=!!s.getAttribute("data-slate-zero-width"),m=me(h)?h:h.parentElement,B=!!m.getAttribute("data-slate-zero-width");return c.setStart(f,g?1:D),c.setEnd(h,B?1:d),c},toSlateNode(e,r){var t=me(r)?r:r.parentElement;t&&!t.hasAttribute("data-slate-node")&&(t=t.closest("[data-slate-node]"));var u=t?Ir.get(t):null;if(!u)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return u},findEventRange(e,r){"nativeEvent"in r&&(r=r.nativeEvent);var{clientX:t,clientY:u,target:n}=r;if(t==null||u==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var a=E.toSlateNode(e,r.target),i=E.findPath(e,a);if(o.isVoid(e,a)){var l=n.getBoundingClientRect(),c=e.isInline(a)?t-l.left<l.left+l.width-t:u-l.top<l.top+l.height-u,f=o.point(e,i,{edge:c?"start":"end"}),D=c?o.before(e,f):o.after(e,f);if(D){var h=o.range(e,D);return h}}var d,{document:s}=E.getWindow(e);if(s.caretRangeFromPoint)d=s.caretRangeFromPoint(t,u);else{var g=s.caretPositionFromPoint(t,u);g&&(d=s.createRange(),d.setStart(g.offsetNode,g.offset),d.setEnd(g.offsetNode,g.offset))}if(!d)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(r));var m=E.toSlateRange(e,d,{exactMatch:!1,suppressThrow:!1});return m},toSlatePoint(e,r,t){var{exactMatch:u,suppressThrow:n}=t,[a,i]=u?r:Ms(r),l=a.parentNode,c=null,f=0;if(l){var D,h,d=E.toDOMNode(e,e),s=l.closest('[data-slate-void="true"]'),g=s&&d.contains(s)?s:null,m=l.closest("[data-slate-leaf]"),B=null;if(m){if(c=m.closest('[data-slate-node="text"]'),c){var b=E.getWindow(e),x=b.document.createRange();x.setStart(c,0),x.setEnd(a,i);var R=x.cloneContents(),M=[...Array.prototype.slice.call(R.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(R.querySelectorAll("[contenteditable=false]"))];M.forEach(L=>{if(Fe&&!u&&L.hasAttribute("data-slate-zero-width")&&L.textContent.length>0&&L.textContext!=="\uFEFF"){L.textContent.startsWith("\uFEFF")&&(L.textContent=L.textContent.slice(1));return}L.parentNode.removeChild(L)}),f=R.textContent.length,B=c}}else if(g){for(var j=g.querySelectorAll("[data-slate-leaf]"),P=0;P<j.length;P++){var q=j[P];if(E.hasDOMNode(e,q)){m=q;break}}m?(c=m.closest('[data-slate-node="text"]'),B=m,f=B.textContent.length,B.querySelectorAll("[data-slate-zero-width]").forEach(L=>{f-=L.textContent.length})):f=1}B&&f===B.textContent.length&&Fe&&B.getAttribute("data-slate-zero-width")==="z"&&(D=B.textContent)!==null&&D!==void 0&&D.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||St&&(h=B.textContent)!==null&&h!==void 0&&h.endsWith(`

`))&&f--}if(Fe&&!c&&!u){var S=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(S&&E.hasDOMNode(e,S,{editable:!0})){var _=E.toSlateNode(e,S),{path:K,offset:Q}=o.start(e,E.findPath(e,_));return S.querySelector("[data-slate-leaf]")||(Q=i),{path:K,offset:Q}}}if(!c){if(n)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(r))}var N=E.toSlateNode(e,c),k=E.findPath(e,N);return{path:k,offset:f}},toSlateRange(e,r,t){var{exactMatch:u,suppressThrow:n}=t,a=Pt(r)?r.anchorNode:r.startContainer,i,l,c,f,D;if(a&&(Pt(r)?(i=r.anchorNode,l=r.anchorOffset,c=r.focusNode,f=r.focusOffset,Zn&&Ns(i)?D=r.anchorNode===r.focusNode&&r.anchorOffset===r.focusOffset:D=r.isCollapsed):(i=r.startContainer,l=r.startOffset,c=r.endContainer,f=r.endOffset,D=r.collapsed)),i==null||c==null||l==null||f==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(r));var h=E.toSlatePoint(e,[i,l],{exactMatch:u,suppressThrow:n});if(!h)return null;var d=D?h:E.toSlatePoint(e,[c,f],{exactMatch:u,suppressThrow:n});if(!d)return null;var s={anchor:h,focus:d};return p.isExpanded(s)&&p.isForward(s)&&me(c)&&o.void(e,{at:s.focus,mode:"highest"})&&(s=o.unhangRange(e,s,{voids:!0})),s},hasRange(e,r){var{anchor:t,focus:u}=r;return o.hasPath(e,t.path)&&o.hasPath(e,u.path)},hasTarget(e,r){return Ke(r)&&E.hasDOMNode(e,r)},hasEditableTarget(e,r){return Ke(r)&&E.hasDOMNode(e,r,{editable:!0})},hasSelectableTarget(e,r){return E.hasEditableTarget(e,r)||E.isTargetInsideNonReadonlyVoid(e,r)},isTargetInsideNonReadonlyVoid(e,r){if(Ot.get(e))return!1;var t=E.hasTarget(e,r)&&E.toSlateNode(e,r);return o.isVoid(e,t)},androidScheduleFlush(e){var r;(r=Nt.get(e))===null||r===void 0||r()},androidPendingDiffs(e){return he.get(e)}},He=Rr?A.useLayoutEffect:A.useEffect,$s=["anchor","focus"],Ys=["anchor","focus"],Gs=(e,r)=>Object.keys(e).length===Object.keys(r).length&&Object.keys(e).every(t=>r.hasOwnProperty(t)&&e[t]===r[t]),Jn=(e,r)=>{if(e.length!==r.length)return!1;for(var t=0;t<e.length;t++){var u=e[t],n=r[t],a=ur(u,$s),i=ur(n,Ys);if(!p.equals(u,n)||u[ar]!==n[ar]||!Gs(a,i))return!1}return!0},Zs=e=>{var{isLast:r,leaf:t,parent:u,text:n}=e,a=Oe(),i=E.findPath(a,n),l=v.parent(i),c=t[Un]===!0;return a.isVoid(u)?A.default.createElement(At,{length:O.string(u).length}):t.text===""&&u.children[u.children.length-1]===n&&!a.isInline(u)&&o.string(a,l)===""?A.default.createElement(At,{isLineBreak:!0,isMarkPlaceholder:c}):t.text===""?A.default.createElement(At,{isMarkPlaceholder:c}):r&&t.text.slice(-1)===`
`?A.default.createElement(kn,{isTrailing:!0,text:t.text}):A.default.createElement(kn,{text:t.text})},kn=e=>{var{text:r,isTrailing:t=!1}=e,u=(0,A.useRef)(null),n=()=>"".concat(r??"").concat(t?`
`:"");return He(()=>{var a=n();u.current&&u.current.textContent!==a&&(u.current.textContent=a)}),u.current?A.default.createElement("span",{"data-slate-string":!0,ref:u}):A.default.createElement("span",{"data-slate-string":!0,ref:u},n())},At=e=>{var{length:r=0,isLineBreak:t=!1,isMarkPlaceholder:u=!1}=e,n={"data-slate-zero-width":t?"n":"z","data-slate-length":r};return u&&(n["data-slate-mark-placeholder"]=!0),A.default.createElement("span",Object.assign({},n),!Fe||!t?"\uFEFF":null,t?A.default.createElement("br",null):null)},Wt=(0,A.createContext)(null),Oe=()=>{var e=(0,A.useContext)(Wt);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},Js=e=>{var{leaf:r,isLast:t,text:u,parent:n,renderPlaceholder:a,renderLeaf:i=s=>A.default.createElement(Qs,Object.assign({},s))}=e,l=(0,A.useRef)(null),c=Oe(),f=(0,A.useRef)(null);(0,A.useEffect)(()=>()=>{f.current&&f.current.disconnect()},[]),(0,A.useEffect)(()=>{var s=l?.current;if(s?Tr.set(c,s):Tr.delete(c),f.current?(f.current.disconnect(),s&&f.current.observe(s)):s&&(f.current=new ResizeObserver(m=>{var[{target:B}]=m,b=jr.get(c);if(b){var x="".concat(B.clientHeight,"px");b.innerHTML=':where([data-slate-editor-id="'.concat(c.id,'"]) { min-height: ').concat(x,"; }")}}),f.current.observe(s)),!s){var g=jr.get(c);g&&(g.innerHTML="")}return()=>{Tr.delete(c)}},[l,r]);var D=A.default.createElement(Zs,{isLast:t,leaf:r,parent:n,text:u});if(r[ar]){var h={children:r.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:l}};D=A.default.createElement(A.default.Fragment,null,a(h),D)}var d={"data-slate-leaf":!0};return i({attributes:d,children:D,leaf:r,text:u})},Xs=A.default.memo(Js,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.renderPlaceholder===e.renderPlaceholder&&r.text===e.text&&I.equals(r.leaf,e.leaf)&&r.leaf[ar]===e.leaf[ar]),Qs=e=>{var{attributes:r,children:t}=e;return A.default.createElement("span",Object.assign({},r),t)},eo=e=>{for(var{decorations:r,isLast:t,parent:u,renderPlaceholder:n,renderLeaf:a,text:i}=e,l=Oe(),c=(0,A.useRef)(null),f=I.decorations(i,r),D=E.findKey(l,i),h=[],d=0;d<f.length;d++){var s=f[d];h.push(A.default.createElement(Xs,{isLast:t&&d===f.length-1,key:"".concat(D.id,"-").concat(d),renderPlaceholder:n,leaf:s,text:i,parent:u,renderLeaf:a}))}return He(()=>{var g=Lr.get(l);c.current?(g?.set(D,c.current),nr.set(i,c.current),Ir.set(c.current,i)):(g?.delete(D),nr.delete(i))}),A.default.createElement("span",{"data-slate-node":"text",ref:c},h)},Xn=A.default.memo(eo,(e,r)=>r.parent===e.parent&&r.isLast===e.isLast&&r.renderLeaf===e.renderLeaf&&r.text===e.text&&Jn(r.decorations,e.decorations)),ro=e=>{var{decorations:r,element:t,renderElement:u=x=>A.default.createElement(uo,Object.assign({},x)),renderPlaceholder:n,renderLeaf:a,selection:i}=e,l=Oe(),c=qt(),f=l.isInline(t),D=E.findKey(l,t),h=(0,A.useCallback)(x=>{var R=Lr.get(l);x?(R?.set(D,x),nr.set(t,x),Ir.set(x,t)):(R?.delete(D),nr.delete(t))},[l,D,t]),d=ea({decorations:r,node:t,renderElement:u,renderPlaceholder:n,renderLeaf:a,selection:i}),s={"data-slate-node":"element",ref:h};if(f&&(s["data-slate-inline"]=!0),!f&&o.hasInlines(l,t)){var g=O.string(t),m=(0,Rt.default)(g);m==="rtl"&&(s.dir=m)}if(o.isVoid(l,t)){s["data-slate-void"]=!0,!c&&f&&(s.contentEditable=!1);var B=f?"span":"div",[[b]]=O.texts(t);d=A.default.createElement(B,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},A.default.createElement(Xn,{renderPlaceholder:n,decorations:[],isLast:!1,parent:t,text:b})),jt.set(b,0),Mt.set(b,t)}return u({attributes:s,children:d,element:t})},to=A.default.memo(ro,(e,r)=>e.element===r.element&&e.renderElement===r.renderElement&&e.renderLeaf===r.renderLeaf&&Jn(e.decorations,r.decorations)&&(e.selection===r.selection||!!e.selection&&!!r.selection&&p.equals(e.selection,r.selection))),uo=e=>{var{attributes:r,children:t,element:u}=e,n=Oe(),a=n.isInline(u)?"span":"div";return A.default.createElement(a,Object.assign({},r,{style:{position:"relative"}}),t)},Qn=(0,A.createContext)(()=>[]),no=()=>(0,A.useContext)(Qn),ao=(0,A.createContext)(!1);var ea=e=>{for(var{decorations:r,node:t,renderElement:u,renderPlaceholder:n,renderLeaf:a,selection:i}=e,l=no(),c=Oe(),f=E.findPath(c,t),D=[],h=G.isElement(t)&&!c.isInline(t)&&o.hasInlines(c,t),d=0;d<t.children.length;d++){var s=f.concat(d),g=t.children[d],m=E.findKey(c,g),B=o.range(c,s),b=i&&p.intersection(B,i),x=l([g,s]);for(var R of r){var M=p.intersection(R,B);M&&x.push(M)}G.isElement(g)?D.push(A.default.createElement(ao.Provider,{key:"provider-".concat(m.id),value:!!b},A.default.createElement(to,{decorations:x,element:g,key:m.id,renderElement:u,renderPlaceholder:n,renderLeaf:a,selection:b}))):D.push(A.default.createElement(Xn,{decorations:x,key:m.id,isLast:h&&d===t.children.length-1,parent:t,renderPlaceholder:n,renderLeaf:a,text:g})),jt.set(g,d),Mt.set(g,t)}return D},ra=(0,A.createContext)(!1),qt=()=>(0,A.useContext)(ra),ta=(0,A.createContext)(null),io=()=>{var e=(0,A.useContext)(ta);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:r}=e;return r};var so=3,oo={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},lo={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},fo={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ae=e=>{var r=oo[e],t=lo[e],u=fo[e],n=r&&(0,kr.isKeyHotkey)(r),a=t&&(0,kr.isKeyHotkey)(t),i=u&&(0,kr.isKeyHotkey)(u);return l=>!!(n&&n(l)||Sn&&a&&a(l)||!Sn&&i&&i(l))},ie={isBold:ae("bold"),isCompose:ae("compose"),isMoveBackward:ae("moveBackward"),isMoveForward:ae("moveForward"),isDeleteBackward:ae("deleteBackward"),isDeleteForward:ae("deleteForward"),isDeleteLineBackward:ae("deleteLineBackward"),isDeleteLineForward:ae("deleteLineForward"),isDeleteWordBackward:ae("deleteWordBackward"),isDeleteWordForward:ae("deleteWordForward"),isExtendBackward:ae("extendBackward"),isExtendForward:ae("extendForward"),isExtendLineBackward:ae("extendLineBackward"),isExtendLineForward:ae("extendLineForward"),isItalic:ae("italic"),isMoveLineBackward:ae("moveLineBackward"),isMoveLineForward:ae("moveLineForward"),isMoveWordBackward:ae("moveWordBackward"),isMoveWordForward:ae("moveWordForward"),isRedo:ae("redo"),isSoftBreak:ae("insertSoftBreak"),isSplitBlock:ae("splitBlock"),isTransposeCharacter:ae("transposeCharacter"),isUndo:ae("undo")},co=(e,r)=>{var t=[],u=()=>{t=[]},n=i=>{if(!!r.current){var l=i.filter(c=>Lt(e,c,i));t.push(...l)}};function a(){t.reverse().forEach(i=>{if(i.type==="characterData"){i.target.textContent=i.oldValue;return}i.removedNodes.forEach(l=>{i.target.insertBefore(l,i.nextSibling)}),i.addedNodes.forEach(l=>{i.target.removeChild(l)})}),u()}return{registerMutations:n,restoreDOM:a,clear:u}},vo={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},Mr=class extends A.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var r,{node:t}=this.props;if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(r=this.mutationObserver)===null||r===void 0||r.observe(t.current,vo)}componentDidMount(){var{receivedUserInput:r}=this.props,t=this.context;this.manager=co(t,r),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var r,t,u,n=(r=this.mutationObserver)===null||r===void 0?void 0:r.takeRecords();if(n!=null&&n.length){var a;(a=this.manager)===null||a===void 0||a.registerMutations(n)}return(t=this.mutationObserver)===null||t===void 0||t.disconnect(),(u=this.manager)===null||u===void 0||u.restoreDOM(),null}componentDidUpdate(){var r;(r=this.manager)===null||r===void 0||r.clear(),this.observe()}componentWillUnmount(){var r;(r=this.mutationObserver)===null||r===void 0||r.disconnect()}render(){return this.props.children}};Mr.contextType=Wt;var Do=Fe?Mr:e=>{var{children:r}=e;return A.default.createElement(A.default.Fragment,null,r)};function ho(e,r){var{path:t,diff:u}=r;if(!o.hasPath(e,t))return!1;var n=O.get(e,t);if(!I.isText(n))return!1;if(u.start!==n.text.length||u.text.length===0)return n.text.slice(u.start,u.start+u.text.length)===u.text;var a=v.next(t);if(!o.hasPath(e,a))return!1;var i=O.get(e,a);return I.isText(i)&&i.text.startsWith(u.text)}function go(e){for(var r=arguments.length,t=new Array(r>1?r-1:0),u=1;u<r;u++)t[u-1]=arguments[u];return t.reduce((n,a)=>n.slice(0,a.start)+a.text+n.slice(a.end),e)}function Co(e,r){for(var t=Math.min(e.length,r.length),u=0;u<t;u++)if(e.charAt(u)!==r.charAt(u))return u;return t}function po(e,r,t){for(var u=Math.min(e.length,r.length,t),n=0;n<u;n++)if(e.charAt(e.length-n-1)!==r.charAt(r.length-n-1))return n;return u}function ua(e,r){var{start:t,end:u,text:n}=r,a=e.slice(t,u),i=Co(a,n),l=Math.min(a.length-i,n.length-i),c=po(a,n,l),f={start:t+i,end:u-c,text:n.slice(i,n.length-c)};return f.start===f.end&&f.text.length===0?null:f}function mo(e,r,t){var u=Math.min(r.start,t.start),n=Math.max(0,Math.min(r.start+r.text.length,t.end)-t.start),a=go(e,r,t),i=Math.max(t.start+t.text.length,r.start+r.text.length+(r.start+r.text.length>t.start?t.text.length:0)-n),l=a.slice(u,i),c=Math.max(r.end,t.end-r.text.length+(r.end-r.start));return ua(e,{start:u,end:c,text:l})}function Bo(e){var{path:r,diff:t}=e;return{anchor:{path:r,offset:t.start},focus:{path:r,offset:t.end}}}function kt(e,r){var{path:t,offset:u}=r;if(!o.hasPath(e,t))return null;var n=O.get(e,t);if(!I.isText(n))return null;var a=o.above(e,{match:l=>o.isBlock(e,l),at:t});if(!a)return null;for(;u>n.text.length;){var i=o.next(e,{at:t,match:I.isText});if(!i||!v.isDescendant(i[1],a[1]))return null;u-=n.text.length,n=i[0],t=i[1]}return{path:t,offset:u}}function Tn(e,r){var t=kt(e,r.anchor);if(!t)return null;if(p.isCollapsed(r))return{anchor:t,focus:t};var u=kt(e,r.focus);return u?{anchor:t,focus:u}:null}function Tt(e,r,t){var u=he.get(e),n=u?.find(D=>{var{path:h}=D;return v.equals(h,r.path)});if(!n||r.offset<=n.diff.start)return U.transform(r,t,{affinity:"backward"});var{diff:a}=n;if(r.offset<=a.start+a.text.length){var i={path:r.path,offset:a.start},l=U.transform(i,t,{affinity:"backward"});return l?{path:l.path,offset:l.offset+r.offset-a.start}:null}var c={path:r.path,offset:r.offset-a.text.length+a.end-a.start},f=U.transform(c,t,{affinity:"backward"});return f?t.type==="split_node"&&v.equals(t.path,r.path)&&c.offset<t.position&&a.start<t.position?f:{path:f.path,offset:f.offset+a.text.length-a.end+a.start}:null}function Rn(e,r,t){var u=Tt(e,r.anchor,t);if(!u)return null;if(p.isCollapsed(r))return{anchor:u,focus:u};var n=Tt(e,r.focus,t);return n?{anchor:u,focus:n}:null}function Eo(e,r){var{path:t,diff:u,id:n}=e;switch(r.type){case"insert_text":return!v.equals(r.path,t)||r.offset>=u.end?e:r.offset<=u.start?{diff:{start:r.text.length+u.start,end:r.text.length+u.end,text:u.text},id:n,path:t}:{diff:{start:u.start,end:u.end+r.text.length,text:u.text},id:n,path:t};case"remove_text":return!v.equals(r.path,t)||r.offset>=u.end?e:r.offset+r.text.length<=u.start?{diff:{start:u.start-r.text.length,end:u.end-r.text.length,text:u.text},id:n,path:t}:{diff:{start:u.start,end:u.end-r.text.length,text:u.text},id:n,path:t};case"split_node":return!v.equals(r.path,t)||r.position>=u.end?{diff:u,id:n,path:v.transform(t,r,{affinity:"backward"})}:r.position>u.start?{diff:{start:u.start,end:Math.min(r.position,u.end),text:u.text},id:n,path:t}:{diff:{start:u.start-r.position,end:u.end-r.position,text:u.text},id:n,path:v.transform(t,r,{affinity:"forward"})};case"merge_node":return v.equals(r.path,t)?{diff:{start:u.start+r.position,end:u.end+r.position,text:u.text},id:n,path:v.transform(t,r)}:{diff:u,id:n,path:v.transform(t,r)}}var a=v.transform(t,r);return a?{diff:u,path:a,id:n}:null}function jn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function xr(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?jn(Object(t),!0).forEach(function(u){Nr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):jn(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Ao=25,Fo=200,wo=function(){};function yo(e){var{editor:r,scheduleOnDOMSelectionChange:t,onDOMSelectionChange:u}=e,n=!1,a=null,i=null,l=null,c=0,f=!1,D=()=>{var N=Ie.get(r);if(Ie.delete(r),N){var{selection:k}=r,L=Tn(r,N);L&&(!k||!p.equals(L,k))&&F.select(r,L)}},h=()=>{var N=Ne.get(r);if(Ne.delete(r),!!N){if(N.at){var k=U.isPoint(N.at)?kt(r,N.at):Tn(r,N.at);if(!k)return;var L=o.range(r,k);(!r.selection||!p.equals(r.selection,L))&&F.select(r,k)}N.run()}},d=()=>{var N;if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),!M()&&!R()){D();return}n||(n=!0,setTimeout(()=>n=!1)),R()&&(n="action");var k=r.selection&&o.rangeRef(r,r.selection,{affinity:"forward"});Te.set(r,r.marks),wo("flush",Ne.get(r),he.get(r));for(var L=!!((N=he.get(r))!==null&&N!==void 0&&N.length),T;T=(Z=he.get(r))===null||Z===void 0?void 0:Z[0];){var Z,C,w=Ae.get(r);w!==void 0&&(Ae.delete(r),r.marks=w),w&&f===!1&&(f=null);var y=Bo(T);(!r.selection||!p.equals(r.selection,y))&&F.select(r,y),T.diff.text?o.insertText(r,T.diff.text):o.deleteFragment(r),he.set(r,(C=he.get(r))===null||C===void 0?void 0:C.filter($=>{var{id:V}=$;return V!==T.id})),ho(r,T)||(L=!1,Ne.delete(r),Te.delete(r),n="action",Ie.delete(r),t.cancel(),u.cancel(),k?.unref())}var W=k?.unref();if(W&&!Ie.get(r)&&(!r.selection||!p.equals(W,r.selection))&&F.select(r,W),R()){h();return}L&&t(),t.flush(),u.flush(),D();var z=Te.get(r);Te.delete(r),z!==void 0&&(r.marks=z,r.onChange())},s=N=>{a&&clearTimeout(a),a=setTimeout(()=>{ze.set(r,!1),d()},Ao)},g=N=>{ze.set(r,!0),a&&(clearTimeout(a),a=null)},m=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,L=Tr.get(r);if(!!L){if(M()||k){L.style.display="none";return}L.style.removeProperty("display")}},B=(N,k)=>{var L,T=(L=he.get(r))!==null&&L!==void 0?L:[];he.set(r,T);var Z=O.leaf(r,N),C=T.findIndex(W=>v.equals(W.path,N));if(C<0){var w=ua(Z.text,k);w&&T.push({path:N,diff:k,id:c++}),m();return}var y=mo(Z.text,T[C].diff,k);if(!y){T.splice(C,1),m();return}T[C]=xr(xr({},T[C]),{},{diff:y})},b=function(k){var{at:L}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};f=!1,Ie.delete(r),t.cancel(),u.cancel(),R()&&d(),Ne.set(r,{at:L,run:k}),l=setTimeout(d)},x=N=>{var k;i&&(clearTimeout(i),i=null);var{inputType:L}=N,T=null,Z=N.dataTransfer||N.data||void 0;f!==!1&&L!=="insertText"&&L!=="insertCompositionText"&&(f=!1);var[C]=N.getTargetRanges();C&&(T=E.toSlateRange(r,C,{exactMatch:!1,suppressThrow:!0}));var w=E.getWindow(r),y=w.getSelection();if(!T&&y&&(C=y,T=E.toSlateRange(r,y,{exactMatch:!1,suppressThrow:!0})),T=(k=T)!==null&&k!==void 0?k:r.selection,!!T){if(p.isExpanded(T)&&L.startsWith("delete")){var[W,z]=p.edges(T),$=O.leaf(r,W.path);if($.text.length===W.offset&&z.offset===0){var V=o.next(r,{at:W.path,match:I.isText});V&&v.equals(V[1],z.path)&&(T={anchor:z,focus:z})}}if(p.isExpanded(T)&&L.startsWith("delete")){if(v.equals(T.anchor.path,T.focus.path)){var[Y,ee]=p.edges(T);return B(T.anchor.path,{text:"",end:ee.offset,start:Y.offset})}var J=L.endsWith("Backward")?"backward":"forward";return b(()=>o.deleteFragment(r,{direction:J}),{at:T})}switch(L){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return b(()=>o.deleteFragment(r),{at:T});case"deleteContent":case"deleteContentForward":{var{anchor:X}=T;if(p.isCollapsed(T)){var se=O.leaf(r,X.path);if(X.offset<se.text.length)return B(X.path,{text:"",start:X.offset,end:X.offset+1})}return b(()=>o.deleteForward(r),{at:T})}case"deleteContentBackward":{var te,{anchor:oe}=T,re=Pt(C)?C.isCollapsed:!!((te=C)!==null&&te!==void 0&&te.collapsed);return re&&p.isCollapsed(T)&&oe.offset>0?B(oe.path,{text:"",start:oe.offset-1,end:oe.offset}):b(()=>o.deleteBackward(r),{at:T})}case"deleteEntireSoftLine":return b(()=>{o.deleteBackward(r,{unit:"line"}),o.deleteForward(r,{unit:"line"})},{at:T});case"deleteHardLineBackward":return b(()=>o.deleteBackward(r,{unit:"block"}),{at:T});case"deleteSoftLineBackward":return b(()=>o.deleteBackward(r,{unit:"line"}),{at:T});case"deleteHardLineForward":return b(()=>o.deleteForward(r,{unit:"block"}),{at:T});case"deleteSoftLineForward":return b(()=>o.deleteForward(r,{unit:"line"}),{at:T});case"deleteWordBackward":return b(()=>o.deleteBackward(r,{unit:"word"}),{at:T});case"deleteWordForward":return b(()=>o.deleteForward(r,{unit:"word"}),{at:T});case"insertLineBreak":return b(()=>o.insertSoftBreak(r),{at:T});case"insertParagraph":return b(()=>o.insertBreak(r),{at:T});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(Z?.constructor.name==="DataTransfer")return b(()=>E.insertData(r,Z),{at:T});if(typeof Z=="string"&&Z.includes(`
`))return b(()=>o.insertSoftBreak(r),{at:p.end(T)});var le=Z??"";if(Ae.get(r)&&(le=le.replace("\uFEFF","")),v.equals(T.anchor.path,T.focus.path)){var[ue,Re]=p.edges(T),Be={start:ue.offset,end:Re.offset,text:le};if(le&&f&&L==="insertCompositionText"){var Ue=f.start+f.text.search(/\S|$/),ir=Be.start+Be.text.search(/\S|$/);ir===Ue+1&&Be.end===f.start+f.text.length?(Be.start-=1,f=null,K()):f=!1}else L==="insertText"?f===null?f=Be:f&&p.isCollapsed(T)&&f.end+f.text.length===ue.offset?f=xr(xr({},f),{},{text:f.text+le}):f=!1:f=!1;B(ue.path,Be);return}return b(()=>o.insertText(r,le),{at:T})}}}},R=()=>!!Ne.get(r),M=()=>{var N;return!!((N=he.get(r))!==null&&N!==void 0&&N.length)},j=()=>R()||M(),P=()=>n,q=N=>{Ie.set(r,N),i&&(clearTimeout(i),i=null);var{selection:k}=r;if(!!N){var L=!k||!v.equals(k.anchor.path,N.anchor.path),T=!k||!v.equals(k.anchor.path.slice(0,-1),N.anchor.path.slice(0,-1));(L&&f||T)&&(f=!1),(L||!M())&&(i=setTimeout(d,Fo))}},S=()=>{(R()||!M())&&d()},_=N=>{M()||(m(!0),setTimeout(m))},K=()=>{R()||(l=setTimeout(d))},Q=N=>{if(!(M()||R())&&N.some(L=>Lt(r,L,N))){var k;(k=Kn.get(r))===null||k===void 0||k()}};return{flush:d,scheduleFlush:K,hasPendingDiffs:M,hasPendingAction:R,hasPendingChanges:j,isFlushing:P,handleUserSelect:q,handleCompositionEnd:s,handleCompositionStart:g,handleDOMBeforeInput:x,handleKeyDown:_,handleDomMutations:Q,handleInput:S}}function bo(){var e=(0,A.useRef)(!1);return(0,A.useEffect)(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}function Oo(e,r,t){var[u]=(0,A.useState)(()=>new MutationObserver(r));He(()=>{u.takeRecords()}),(0,A.useEffect)(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return u.observe(e.current,t),()=>u.disconnect()},[])}var xo=["node"];function Mn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Po(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Mn(Object(t),!0).forEach(function(u){Nr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Mn(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var So={subtree:!0,childList:!0,characterData:!0};function ko(e){var{node:r}=e,t=ur(e,xo);if(!Fe)return null;var u=Oe(),n=bo(),[a]=(0,A.useState)(()=>yo(Po({editor:u},t)));return Oo(r,a.handleDomMutations,So),Nt.set(u,a.scheduleFlush),n&&a.flush(),a}function To(){var e=Oe(),r=(0,A.useRef)(!1),t=(0,A.useRef)(0),u=(0,A.useCallback)(()=>{if(!r.current){r.current=!0;var n=E.getWindow(e);n.cancelAnimationFrame(t.current),t.current=n.requestAnimationFrame(()=>{r.current=!1})}},[]);return(0,A.useEffect)(()=>()=>cancelAnimationFrame(t.current),[]),{receivedUserInput:r,onUserInput:u}}var Ro=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"],jo=["text"];function Nn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function Ft(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Nn(Object(t),!0).forEach(function(u){Nr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Nn(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var Mo=e=>A.default.createElement(A.default.Fragment,null,ea(e)),Pr=0,na=e=>{var{autoFocus:r,decorate:t=Io,onDOMBeforeInput:u,placeholder:n,readOnly:a=!1,renderElement:i,renderLeaf:l,renderPlaceholder:c=C=>A.default.createElement(No,Object.assign({},C)),scrollSelectionIntoView:f=Lo,style:D={},as:h="div"}=e,d=ur(e,Ro),s=io(),[g,m]=(0,A.useState)(!1),B=(0,A.useRef)(null),b=(0,A.useRef)([]),{onUserInput:x,receivedUserInput:R}=To(),[,M]=(0,A.useReducer)(C=>C+1,0);Kn.set(s,M),Ot.set(s,a);var j=(0,A.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,A.useEffect)(()=>{B.current&&r&&B.current.focus()},[r]);var P=(0,A.useCallback)((0,Vn.default)(()=>{if((Fe||!E.isComposing(s))&&(!j.isUpdatingSelection||S!=null&&S.isFlushing())&&!j.isDraggingInternally){var C=E.findDocumentOrShadowRoot(s),{activeElement:w}=C,y=E.toDOMNode(s,s),W=C.getSelection();if(w===y?(j.latestElement=w,Ve.set(s,!0)):Ve.delete(s),!W)return F.deselect(s);var{anchorNode:z,focusNode:$}=W,V=E.hasEditableTarget(s,z)||E.isTargetInsideNonReadonlyVoid(s,z),Y=E.hasEditableTarget(s,$)||E.isTargetInsideNonReadonlyVoid(s,$);if(V&&Y){var ee=E.toSlateRange(s,W,{exactMatch:!1,suppressThrow:!0});ee&&(!E.isComposing(s)&&!(S!=null&&S.hasPendingChanges())&&!(S!=null&&S.isFlushing())?F.select(s,ee):S?.handleUserSelect(ee))}a&&(!V||!Y)&&F.deselect(s)}},100),[a]),q=(0,A.useMemo)(()=>(0,_n.default)(P,0),[P]),S=ko({node:B,onDOMSelectionChange:P,scheduleOnDOMSelectionChange:q});He(()=>{var C;B.current&&(C=It(B.current))?(Hn.set(s,C),yt.set(s,B.current),nr.set(s,B.current),Ir.set(B.current,s)):nr.delete(s);var{selection:w}=s,y=E.findDocumentOrShadowRoot(s),W=y.getSelection();if(!(!W||!E.isFocused(s)||S!=null&&S.hasPendingAction())){var z=J=>{var X=W.type!=="None";if(!(!w&&!X)){var se=yt.get(s),te=!1;if(se.contains(W.anchorNode)&&se.contains(W.focusNode)&&(te=!0),X&&te&&w&&!J){var oe=E.toSlateRange(s,W,{exactMatch:!0,suppressThrow:!0});if(oe&&p.equals(oe,w)){var re;if(!j.hasMarkPlaceholder)return;var{anchorNode:le}=W;if(le!=null&&(re=le.parentElement)!==null&&re!==void 0&&re.hasAttribute("data-slate-mark-placeholder"))return}}if(w&&!E.hasRange(s,w)){s.selection=E.toSlateRange(s,W,{exactMatch:!1,suppressThrow:!0});return}j.isUpdatingSelection=!0;var ue=w&&E.toDOMRange(s,w);return ue?(p.isBackward(w)?W.setBaseAndExtent(ue.endContainer,ue.endOffset,ue.startContainer,ue.startOffset):W.setBaseAndExtent(ue.startContainer,ue.startOffset,ue.endContainer,ue.endOffset),f(s,ue)):W.removeAllRanges(),ue}},$=z(),V=S?.isFlushing()==="action";if(!Fe||!V){setTimeout(()=>{if($&&St){var J=E.toDOMNode(s,s);J.focus()}j.isUpdatingSelection=!1});return}var Y=null,ee=requestAnimationFrame(()=>{if(V){var J=X=>{try{var se=E.toDOMNode(s,s);se.focus(),z(X)}catch{}};J(),Y=setTimeout(()=>{J(!0),j.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(ee),Y&&clearTimeout(Y)}}});var _=(0,A.useCallback)(C=>{if(x(),!a&&E.hasEditableTarget(s,C.target)&&!Wo(C,u)){var w;if(S)return S.handleDOMBeforeInput(C);q.flush(),P.flush();var{selection:y}=s,{inputType:W}=C,z=C.dataTransfer||C.data||void 0,$=W==="insertCompositionText"||W==="deleteCompositionText";if($&&E.isComposing(s))return;var V=!1;if(W==="insertText"&&y&&p.isCollapsed(y)&&C.data&&C.data.length===1&&/[a-z ]/i.test(C.data)&&y.anchor.offset!==0){var Y,ee;V=!0,s.marks&&(V=!1);var{anchor:J}=y,[X,se]=E.toDOMPoint(s,J),te=(Y=X.parentElement)===null||Y===void 0?void 0:Y.closest("a"),oe=E.getWindow(s);if(V&&te&&E.hasDOMNode(s,te)){var re,le=oe?.document.createTreeWalker(te,NodeFilter.SHOW_TEXT).lastChild();le===X&&((re=le.textContent)===null||re===void 0?void 0:re.length)===se&&(V=!1)}if(V&&X.parentElement&&(oe==null||(ee=oe.getComputedStyle(X.parentElement))===null||ee===void 0?void 0:ee.whiteSpace)==="pre"){var ue=o.above(s,{at:J.path,match:_r=>o.isBlock(s,_r)});ue&&O.string(ue[0]).includes("	")&&(V=!1)}}if(!W.startsWith("delete")||W.startsWith("deleteBy")){var[Re]=C.getTargetRanges();if(Re){var Be=E.toSlateRange(s,Re,{exactMatch:!1,suppressThrow:!1});if(!y||!p.equals(y,Be)){V=!1;var Ue=!$&&s.selection&&o.rangeRef(s,s.selection);F.select(s,Be),Ue&&Dr.set(s,Ue)}}}if($)return;if(V||C.preventDefault(),y&&p.isExpanded(y)&&W.startsWith("delete")){var ir=W.endsWith("Backward")?"backward":"forward";o.deleteFragment(s,{direction:ir});return}switch(W){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{o.deleteFragment(s);break}case"deleteContent":case"deleteContentForward":{o.deleteForward(s);break}case"deleteContentBackward":{o.deleteBackward(s);break}case"deleteEntireSoftLine":{o.deleteBackward(s,{unit:"line"}),o.deleteForward(s,{unit:"line"});break}case"deleteHardLineBackward":{o.deleteBackward(s,{unit:"block"});break}case"deleteSoftLineBackward":{o.deleteBackward(s,{unit:"line"});break}case"deleteHardLineForward":{o.deleteForward(s,{unit:"block"});break}case"deleteSoftLineForward":{o.deleteForward(s,{unit:"line"});break}case"deleteWordBackward":{o.deleteBackward(s,{unit:"word"});break}case"deleteWordForward":{o.deleteForward(s,{unit:"word"});break}case"insertLineBreak":o.insertSoftBreak(s);break;case"insertParagraph":{o.insertBreak(s);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{W==="insertFromComposition"&&E.isComposing(s)&&(m(!1),ze.set(s,!1)),z?.constructor.name==="DataTransfer"?E.insertData(s,z):typeof z=="string"&&(V?b.current.push(()=>o.insertText(s,z)):o.insertText(s,z));break}}var $e=(w=Dr.get(s))===null||w===void 0?void 0:w.unref();Dr.delete(s),$e&&(!s.selection||!p.equals(s.selection,$e))&&F.select(s,$e)}},[a,u]);He(()=>(B.current&&Me&&B.current.addEventListener("beforeinput",_),()=>{B.current&&Me&&B.current.removeEventListener("beforeinput",_)}),[_]),He(()=>{var C=E.getWindow(s);return C.document.addEventListener("selectionchange",q),()=>{C.document.removeEventListener("selectionchange",q)}},[q]);var K=t([s,[]]);if(n&&s.children.length===1&&Array.from(O.texts(s)).length===1&&O.string(s)===""&&!g){var Q=o.start(s,[]);K.push({[ar]:!0,placeholder:n,anchor:Q,focus:Q})}var{marks:N}=s;if(j.hasMarkPlaceholder=!1,s.selection&&p.isCollapsed(s.selection)&&N){var{anchor:k}=s.selection,L=O.leaf(s,k.path),T=ur(L,jo);if(!I.equals(L,N,{loose:!0})){j.hasMarkPlaceholder=!0;var Z=Object.fromEntries(Object.keys(T).map(C=>[C,null]));K.push(Ft(Ft(Ft({[Un]:!0},Z),N),{},{anchor:k,focus:k}))}}return(0,A.useEffect)(()=>{setTimeout(()=>{var{selection:C}=s;if(C){var{anchor:w}=C,y=O.leaf(s,w.path);if(N&&!I.equals(y,N,{loose:!0})){Ae.set(s,N);return}}Ae.delete(s)})}),(0,A.useEffect)(()=>{if(Pr++,Pr===1){var C=document.createElement("style");C.setAttribute("data-slate-default-styles","true"),C.innerHTML=":where([data-slate-editor]) {position: relative;outline: none;white-space: pre-wrap;word-wrap: break-word;}",document.head.appendChild(C)}return()=>{var w;Pr--,Pr<=0&&((w=document.querySelector("style[data-slate-default-styles]"))===null||w===void 0||w.remove())}},[]),(0,A.useEffect)(()=>{var C=document.createElement("style");return document.head.appendChild(C),jr.set(s,C),()=>{C.remove(),jr.delete(s)}},[]),A.default.createElement(ra.Provider,{value:a},A.default.createElement(Qn.Provider,{value:t},A.default.createElement(Do,{node:B,receivedUserInput:R},A.default.createElement(h,Object.assign({role:a?void 0:"textbox","aria-multiline":a?void 0:!0},d,{spellCheck:Me||!Rr?d.spellCheck:!1,autoCorrect:Me||!Rr?d.autoCorrect:"false",autoCapitalize:Me||!Rr?d.autoCapitalize:"false","data-slate-editor":!0,"data-slate-editor-id":s.id,"data-slate-node":"value",contentEditable:!a,zindex:-1,suppressContentEditableWarning:!0,ref:B,style:D,onBeforeInput:(0,A.useCallback)(C=>{if(!Me&&!a&&!De(C,d.onBeforeInput)&&E.hasSelectableTarget(s,C.target)&&(C.preventDefault(),!E.isComposing(s))){var w=C.data;o.insertText(s,w)}},[a]),onInput:(0,A.useCallback)(C=>{if(S){S.handleInput();return}for(var w of b.current)w();b.current=[]},[]),onBlur:(0,A.useCallback)(C=>{if(!(a||j.isUpdatingSelection||!E.hasSelectableTarget(s,C.target)||De(C,d.onBlur))){var w=E.findDocumentOrShadowRoot(s);if(j.latestElement!==w.activeElement){var{relatedTarget:y}=C,W=E.toDOMNode(s,s);if(y!==W&&!(me(y)&&y.hasAttribute("data-slate-spacer"))){if(y!=null&&Ke(y)&&E.hasDOMNode(s,y)){var z=E.toSlateNode(s,y);if(G.isElement(z)&&!s.isVoid(z))return}if(Et){var $=w.getSelection();$?.removeAllRanges()}Ve.delete(s)}}}},[a,d.onBlur]),onClick:(0,A.useCallback)(C=>{if(E.hasTarget(s,C.target)&&!De(C,d.onClick)&&Ke(C.target)){var w=E.toSlateNode(s,C.target),y=E.findPath(s,w);if(!o.hasPath(s,y)||O.get(s,y)!==w)return;if(C.detail===so&&y.length>=1){var W=y;if(!o.isBlock(s,w)){var z,$=o.above(s,{match:te=>o.isBlock(s,te),at:y});W=(z=$?.[1])!==null&&z!==void 0?z:y.slice(0,1)}var V=o.range(s,W);F.select(s,V);return}if(a)return;var Y=o.start(s,y),ee=o.end(s,y),J=o.void(s,{at:Y}),X=o.void(s,{at:ee});if(J&&X&&v.equals(J[1],X[1])){var se=o.range(s,Y);F.select(s,se)}}},[a,d.onClick]),onCompositionEnd:(0,A.useCallback)(C=>{if(E.hasSelectableTarget(s,C.target)){if(E.isComposing(s)&&(m(!1),ze.set(s,!1)),S?.handleCompositionEnd(C),De(C,d.onCompositionEnd)||Fe)return;if(!Et&&!Hs&&!_s&&!Us&&!Ks&&C.data){var w=Ae.get(s);Ae.delete(s),w!==void 0&&(Te.set(s,s.marks),s.marks=w),o.insertText(s,C.data);var y=Te.get(s);Te.delete(s),y!==void 0&&(s.marks=y)}}},[d.onCompositionEnd]),onCompositionUpdate:(0,A.useCallback)(C=>{E.hasSelectableTarget(s,C.target)&&!De(C,d.onCompositionUpdate)&&(E.isComposing(s)||(m(!0),ze.set(s,!0)))},[d.onCompositionUpdate]),onCompositionStart:(0,A.useCallback)(C=>{if(E.hasSelectableTarget(s,C.target)){if(S?.handleCompositionStart(C),De(C,d.onCompositionStart)||Fe)return;m(!0);var{selection:w}=s;if(w){if(p.isExpanded(w)){o.deleteFragment(s);return}var y=o.above(s,{match:$=>o.isInline(s,$),mode:"highest"});if(y){var[,W]=y;if(o.isEnd(s,w.anchor,W)){var z=o.after(s,W);F.setSelection(s,{anchor:z,focus:z})}}}}},[d.onCompositionStart]),onCopy:(0,A.useCallback)(C=>{E.hasSelectableTarget(s,C.target)&&!De(C,d.onCopy)&&(C.preventDefault(),E.setFragmentData(s,C.clipboardData,"copy"))},[d.onCopy]),onCut:(0,A.useCallback)(C=>{if(!a&&E.hasSelectableTarget(s,C.target)&&!De(C,d.onCut)){C.preventDefault(),E.setFragmentData(s,C.clipboardData,"cut");var{selection:w}=s;if(w)if(p.isExpanded(w))o.deleteFragment(s);else{var y=O.parent(s,w.anchor.path);o.isVoid(s,y)&&F.delete(s)}}},[a,d.onCut]),onDragOver:(0,A.useCallback)(C=>{if(E.hasTarget(s,C.target)&&!De(C,d.onDragOver)){var w=E.toSlateNode(s,C.target);o.isVoid(s,w)&&C.preventDefault()}},[d.onDragOver]),onDragStart:(0,A.useCallback)(C=>{if(!a&&E.hasTarget(s,C.target)&&!De(C,d.onDragStart)){var w=E.toSlateNode(s,C.target),y=E.findPath(s,w),W=o.isVoid(s,w)||o.void(s,{at:y,voids:!0});if(W){var z=o.range(s,y);F.select(s,z)}j.isDraggingInternally=!0,E.setFragmentData(s,C.dataTransfer,"drag")}},[a,d.onDragStart]),onDrop:(0,A.useCallback)(C=>{if(!a&&E.hasTarget(s,C.target)&&!De(C,d.onDrop)){C.preventDefault();var w=s.selection,y=E.findEventRange(s,C),W=C.dataTransfer;F.select(s,y),j.isDraggingInternally&&w&&!p.equals(w,y)&&!o.void(s,{at:y,voids:!0})&&F.delete(s,{at:w}),E.insertData(s,W),E.isFocused(s)||E.focus(s)}j.isDraggingInternally=!1},[a,d.onDrop]),onDragEnd:(0,A.useCallback)(C=>{!a&&j.isDraggingInternally&&d.onDragEnd&&E.hasTarget(s,C.target)&&d.onDragEnd(C),j.isDraggingInternally=!1},[a,d.onDragEnd]),onFocus:(0,A.useCallback)(C=>{if(!a&&!j.isUpdatingSelection&&E.hasEditableTarget(s,C.target)&&!De(C,d.onFocus)){var w=E.toDOMNode(s,s),y=E.findDocumentOrShadowRoot(s);if(j.latestElement=y.activeElement,St&&C.target!==w){w.focus();return}Ve.set(s,!0)}},[a,d.onFocus]),onKeyDown:(0,A.useCallback)(C=>{if(!a&&E.hasEditableTarget(s,C.target)){S?.handleKeyDown(C);var{nativeEvent:w}=C;if(E.isComposing(s)&&w.isComposing===!1&&(ze.set(s,!1),m(!1)),De(C,d.onKeyDown)||E.isComposing(s))return;var{selection:y}=s,W=s.children[y!==null?y.focus.path[0]:0],z=(0,Rt.default)(O.string(W))==="rtl";if(ie.isRedo(w)){C.preventDefault();var $=s;typeof $.redo=="function"&&$.redo();return}if(ie.isUndo(w)){C.preventDefault();var V=s;typeof V.undo=="function"&&V.undo();return}if(ie.isMoveLineBackward(w)){C.preventDefault(),F.move(s,{unit:"line",reverse:!0});return}if(ie.isMoveLineForward(w)){C.preventDefault(),F.move(s,{unit:"line"});return}if(ie.isExtendLineBackward(w)){C.preventDefault(),F.move(s,{unit:"line",edge:"focus",reverse:!0});return}if(ie.isExtendLineForward(w)){C.preventDefault(),F.move(s,{unit:"line",edge:"focus"});return}if(ie.isMoveBackward(w)){C.preventDefault(),y&&p.isCollapsed(y)?F.move(s,{reverse:!z}):F.collapse(s,{edge:"start"});return}if(ie.isMoveForward(w)){C.preventDefault(),y&&p.isCollapsed(y)?F.move(s,{reverse:z}):F.collapse(s,{edge:"end"});return}if(ie.isMoveWordBackward(w)){C.preventDefault(),y&&p.isExpanded(y)&&F.collapse(s,{edge:"focus"}),F.move(s,{unit:"word",reverse:!z});return}if(ie.isMoveWordForward(w)){C.preventDefault(),y&&p.isExpanded(y)&&F.collapse(s,{edge:"focus"}),F.move(s,{unit:"word",reverse:z});return}if(Me){if((Zn||Et)&&y&&(ie.isDeleteBackward(w)||ie.isDeleteForward(w))&&p.isCollapsed(y)){var Y=O.parent(s,y.anchor.path);if(G.isElement(Y)&&o.isVoid(s,Y)&&(o.isInline(s,Y)||o.isBlock(s,Y))){C.preventDefault(),o.deleteBackward(s,{unit:"block"});return}}}else{if(ie.isBold(w)||ie.isItalic(w)||ie.isTransposeCharacter(w)){C.preventDefault();return}if(ie.isSoftBreak(w)){C.preventDefault(),o.insertSoftBreak(s);return}if(ie.isSplitBlock(w)){C.preventDefault(),o.insertBreak(s);return}if(ie.isDeleteBackward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"backward"}):o.deleteBackward(s);return}if(ie.isDeleteForward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"forward"}):o.deleteForward(s);return}if(ie.isDeleteLineBackward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"backward"}):o.deleteBackward(s,{unit:"line"});return}if(ie.isDeleteLineForward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"forward"}):o.deleteForward(s,{unit:"line"});return}if(ie.isDeleteWordBackward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"backward"}):o.deleteBackward(s,{unit:"word"});return}if(ie.isDeleteWordForward(w)){C.preventDefault(),y&&p.isExpanded(y)?o.deleteFragment(s,{direction:"forward"}):o.deleteForward(s,{unit:"word"});return}}}},[a,d.onKeyDown]),onPaste:(0,A.useCallback)(C=>{!a&&E.hasSelectableTarget(s,C.target)&&!De(C,d.onPaste)&&(!Me||js(C.nativeEvent))&&(C.preventDefault(),E.insertData(s,C.clipboardData))},[a,d.onPaste])}),A.default.createElement(Mo,{decorations:K,node:s,renderElement:i,renderPlaceholder:c,renderLeaf:l,selection:s.selection})))))},No=e=>{var{attributes:r,children:t}=e;return A.default.createElement("span",Object.assign({},r),t,Fe&&A.default.createElement("br",null))},Io=()=>[],Lo=(e,r)=>{if(r.getBoundingClientRect&&(!e.selection||e.selection&&p.isCollapsed(e.selection))){var t=r.startContainer.parentElement;t.getBoundingClientRect=r.getBoundingClientRect.bind(r),wn(t,{scrollMode:"if-needed"}),delete t.getBoundingClientRect}},De=(e,r)=>{if(!r)return!1;var t=r(e);return t??(e.isDefaultPrevented()||e.isPropagationStopped())},Wo=(e,r)=>{if(!r)return!1;var t=r(e);return t??e.defaultPrevented},qo=(0,A.createContext)(!1);var _o=(0,A.createContext)({});function Vo(e){var r=(0,A.useRef)([]).current,t=(0,A.useRef)({editor:e}).current,u=(0,A.useCallback)(a=>{t.editor=a,r.forEach(i=>i(a))},[]),n=(0,A.useMemo)(()=>({getSlate:()=>t.editor,addEventListener:a=>(r.push(a),()=>{r.splice(r.indexOf(a),1)})}),[r,t]);return{selectorContext:n,onChange:u}}var zo=["editor","children","onChange","value"],aa=e=>{var{editor:r,children:t,onChange:u,value:n}=e,a=ur(e,zo),i=(0,A.useRef)(!1),[l,c]=A.default.useState(()=>{if(!O.isNodeList(n))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(fe.stringify(n)));if(!o.isEditor(r))throw new Error("[Slate] editor is invalid! You passed: ".concat(fe.stringify(r)));return r.children=n,Object.assign(r,a),{v:0,editor:r}}),{selectorContext:f,onChange:D}=Vo(r),h=(0,A.useCallback)(()=>{u&&u(r.children),c(g=>({v:g.v+1,editor:r})),D(r)},[u]);xt.set(r,h),(0,A.useEffect)(()=>()=>{xt.set(r,()=>{}),i.current=!0},[]);var[d,s]=(0,A.useState)(E.isFocused(r));return(0,A.useEffect)(()=>{s(E.isFocused(r))}),He(()=>{var g=()=>s(E.isFocused(r));return qs?(document.addEventListener("focusin",g),document.addEventListener("focusout",g),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",g)}):(document.addEventListener("focus",g,!0),document.addEventListener("blur",g,!0),()=>{document.removeEventListener("focus",g,!0),document.removeEventListener("blur",g,!0)})},[]),A.default.createElement(_o.Provider,{value:f},A.default.createElement(ta.Provider,{value:l},A.default.createElement(Wt.Provider,{value:l.editor},A.default.createElement(qo.Provider,{value:d},t))))};var In=(e,r)=>{var t=(r.top+r.bottom)/2;return e.top<=t&&e.bottom>=t},Ln=(e,r,t)=>{var u=E.toDOMRange(e,r).getBoundingClientRect(),n=E.toDOMRange(e,t).getBoundingClientRect();return In(u,n)&&In(n,u)},Ho=(e,r)=>{var t=o.range(e,p.end(r)),u=Array.from(o.positions(e,{at:r})),n=0,a=u.length,i=Math.floor(a/2);if(Ln(e,o.range(e,u[n]),t))return o.range(e,u[n],t);if(u.length<2)return o.range(e,u[u.length-1],t);for(;i!==u.length&&i!==n;)Ln(e,o.range(e,u[i]),t)?a=i:n=i,i=Math.floor((n+a)/2);return o.range(e,u[a],t)};function Wn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);r&&(u=u.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,u)}return t}function qn(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?arguments[r]:{};r%2?Wn(Object(t),!0).forEach(function(u){Nr(e,u,t[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Wn(Object(t)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(t,u))})}return e}var ia=e=>{var r=e,{apply:t,onChange:u,deleteBackward:n,addMark:a,removeMark:i}=r;return Lr.set(r,new WeakMap),r.addMark=(l,c)=>{var f,D;(f=Nt.get(r))===null||f===void 0||f(),!Ae.get(r)&&(D=he.get(r))!==null&&D!==void 0&&D.length&&Ae.set(r,null),Te.delete(r),a(l,c)},r.removeMark=l=>{var c;!Ae.get(r)&&(c=he.get(r))!==null&&c!==void 0&&c.length&&Ae.set(r,null),Te.delete(r),i(l)},r.deleteBackward=l=>{if(l!=="line")return n(l);if(r.selection&&p.isCollapsed(r.selection)){var c=o.above(r,{match:d=>o.isBlock(r,d),at:r.selection});if(c){var[,f]=c,D=o.range(r,f,r.selection.anchor),h=Ho(r,D);p.isCollapsed(h)||F.delete(r,{at:h})}}},r.apply=l=>{var c=[],f=he.get(r);if(f!=null&&f.length){var D=f.map(M=>Eo(M,l)).filter(Boolean);he.set(r,D)}var h=Ie.get(r);h&&Ie.set(r,Rn(r,h,l));var d=Ne.get(r);if(d!=null&&d.at){var s=U.isPoint(d?.at)?Tt(r,d.at,l):Rn(r,d.at,l);Ne.set(r,s?qn(qn({},d),{},{at:s}):null)}switch(l.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{c.push(...Sr(r,l.path));break}case"set_selection":{var g;(g=Dr.get(r))===null||g===void 0||g.unref(),Dr.delete(r);break}case"insert_node":case"remove_node":{c.push(...Sr(r,v.parent(l.path)));break}case"merge_node":{var m=v.previous(l.path);c.push(...Sr(r,m));break}case"move_node":{var B=v.common(v.parent(l.path),v.parent(l.newPath));c.push(...Sr(r,B));break}}t(l);for(var[b,x]of c){var[R]=o.node(r,b);bt.set(R,x)}},r.setFragmentData=l=>{var{selection:c}=r;if(!!c){var[f,D]=p.edges(c),h=o.void(r,{at:f.path}),d=o.void(r,{at:D.path});if(!(p.isCollapsed(c)&&!h)){var s=E.toDOMRange(r,c),g=s.cloneContents(),m=g.childNodes[0];if(g.childNodes.forEach(S=>{S.textContent&&S.textContent.trim()!==""&&(m=S)}),d){var[B]=d,b=s.cloneRange(),x=E.toDOMNode(r,B);b.setEndAfter(x),g=b.cloneContents()}if(h&&(m=g.querySelector("[data-slate-spacer]")),Array.from(g.querySelectorAll("[data-slate-zero-width]")).forEach(S=>{var _=S.getAttribute("data-slate-zero-width")==="n";S.textContent=_?`
`:""}),$n(m)){var R=m.ownerDocument.createElement("span");R.style.whiteSpace="pre",R.appendChild(m),g.appendChild(R),m=R}var M=r.getFragment(),j=JSON.stringify(M),P=window.btoa(encodeURIComponent(j));m.setAttribute("data-slate-fragment",P),l.setData("application/x-slate-fragment",P);var q=g.ownerDocument.createElement("div");return q.appendChild(g),q.setAttribute("hidden","true"),g.ownerDocument.body.appendChild(q),l.setData("text/html",q.innerHTML),l.setData("text/plain",Gn(q)),g.ownerDocument.body.removeChild(q),l}}},r.insertData=l=>{r.insertFragmentData(l)||r.insertTextData(l)},r.insertFragmentData=l=>{var c=l.getData("application/x-slate-fragment")||Ws(l);if(c){var f=decodeURIComponent(window.atob(c)),D=JSON.parse(f);return r.insertFragment(D),!0}return!1},r.insertTextData=l=>{var c=l.getData("text/plain");if(c){var f=c.split(/\r\n|\r|\n/),D=!1;for(var h of f)D&&F.splitNodes(r,{always:!0}),r.insertText(h),D=!0;return!0}return!1},r.onChange=()=>{zn.default.unstable_batchedUpdates(()=>{var l=xt.get(r);l&&l(),u()})},r},Sr=(e,r)=>{var t=[];for(var[u,n]of o.levels(e,{at:r})){var a=E.findKey(e,u);t.push([n,a])}return t};var _t={"*":"list-item","-":"list-item","+":"list-item",">":"block-quote","#":"heading-one","##":"heading-two","###":"heading-three","####":"heading-four","#####":"heading-five","######":"heading-six","[]":"check-list-item"},sa=e=>{let{deleteBackward:r,insertText:t}=e;return e.insertText=u=>{let{selection:n}=e;if(u.endsWith(" ")&&n&&p.isCollapsed(n)){let{anchor:a}=n,i=o.above(e,{match:d=>o.isBlock(e,d)}),l=i?i[1]:[],c=o.start(e,l),f={anchor:a,focus:c},D=o.string(e,f)+u.slice(0,-1),h=_t[D];if(h){F.select(e,f),p.isCollapsed(f)||F.delete(e);let d={type:h};if(F.setNodes(e,d,{match:s=>o.isBlock(e,s)}),h==="list-item"){let s={type:"bulleted-list",children:[]};F.wrapNodes(e,s,{match:g=>!o.isEditor(g)&&G.isElement(g)&&g.type==="list-item"})}return}}t(u)},e.deleteBackward=(...u)=>{let{selection:n}=e;if(n&&p.isCollapsed(n)){let a=o.above(e,{match:i=>o.isBlock(e,i)});if(a){let[i,l]=a,c=o.start(e,l);if(!o.isEditor(i)&&G.isElement(i)&&i.type!=="paragraph"&&U.equals(n.anchor,c)){let f={type:"paragraph"};F.setNodes(e,f),i.type==="list-item"&&F.unwrapNodes(e,{match:D=>!o.isEditor(D)&&G.isElement(D)&&D.type==="bulleted-list",split:!0});return}}r(...u)}},e},oa=e=>{let{deleteBackward:r}=e;return e.deleteBackward=(...t)=>{let{selection:u}=e;if(u&&p.isCollapsed(u)){let[n]=o.nodes(e,{match:a=>!o.isEditor(a)&&G.isElement(a)&&a.type==="check-list-item"});if(n){let[,a]=n,i=o.start(e,a);if(U.equals(u.anchor,i)){let l={type:"paragraph"};F.setNodes(e,l,{match:c=>!o.isEditor(c)&&G.isElement(c)&&c.type==="check-list-item"});return}}}r(...t)},e};var pe=ve(Je()),la=e=>{let{attributes:r,children:t,element:u}=e;switch(u.type){case"heading-one":return(0,pe.jsx)(xe,{as:"h1",...r,children:t});case"heading-two":return(0,pe.jsx)(xe,{as:"h2",...r,children:t});case"heading-three":return(0,pe.jsx)(xe,{as:"h3",...r,children:t});case"heading-four":return(0,pe.jsx)(xe,{as:"h4",...r,children:t});case"heading-five":return(0,pe.jsx)(xe,{as:"h5",...r,children:t});case"heading-six":return(0,pe.jsx)(xe,{as:"h6",...r,children:t});case"bulleted-list":return(0,pe.jsx)(Zt,{listStyleType:"disc",...r,children:t});case"list-item":return(0,pe.jsx)(Jt,{...r,children:t});case"check-list-item":return(0,pe.jsx)(Ko,{...e});default:return(0,pe.jsx)(xe,{...r,children:t})}},Ko=e=>{let{attributes:r,children:t,element:u}=e,n=Oe(),a=qt(),{checked:i}=u;return(0,pe.jsx)(Gt,{...r,checked:i,onChange:l=>{let c=E.findPath(n,u),f={checked:l.target.checked};F.setNodes(n,f,{at:c})},children:(0,pe.jsx)(xe,{contentEditable:!a,suppressContentEditableWarning:!0,textDecoration:i?"line-through":void 0,children:t})})};var fa=[{type:"paragraph",children:[{text:`The editor gives you full control over the logic you can add. For example, it's fairly common to want to add markdown-like shortcuts to editors. So that, when you start a line with "> " you get a blockquote that looks like this:`}]},{type:"block-quote",children:[{text:"A wise quote."}]},{type:"paragraph",children:[{text:'Order when you start a line with "## " you get a level-two heading, like this:'}]},{type:"heading-two",children:[{text:"Try it out!"}]},{type:"paragraph",children:[{text:'Try it out for yourself! Try starting a new line with ">", "-", or "#"s.'}]}];var Wr=ve(Je()),Vt=e=>{let{initialValue:r=fa}=e,t=(0,qr.useCallback)(a=>(0,Wr.jsx)(la,{...a}),[]),u=(0,qr.useMemo)(()=>oa(sa(ia(Nu(ku())))),[]);return(0,Wr.jsx)(aa,{editor:u,value:r,children:(0,Wr.jsx)(na,{onDOMBeforeInput:a=>{queueMicrotask(()=>{E.androidPendingDiffs(u)?.some(({diff:c,path:f})=>{if(!c.text.endsWith(" "))return!1;let{text:D}=O.leaf(u,f);if(!(D.slice(0,c.start)+c.text.slice(0,-1)in _t))return!1;let d=o.above(u,{at:f,match:g=>o.isBlock(u,g)});if(!d)return!1;let[,s]=d;return o.isStart(u,o.start(u,f),s)})&&E.androidScheduleFlush(u)})},renderElement:t,placeholder:"Write some markdown...",spellCheck:!0,autoFocus:!0})})};var hr=ve(Je());function ca(){let{initialValue:e}=Yt();return(0,hr.jsx)(hr.Fragment,{children:(0,hr.jsx)(Vt,{initialValue:e})})}export{ca as default};
